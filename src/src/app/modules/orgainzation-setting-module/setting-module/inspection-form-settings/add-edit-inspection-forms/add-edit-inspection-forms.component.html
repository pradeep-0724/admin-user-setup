
<div  class="form-layout--pd">
    <form class="def-color" [formGroup]="inspectionForm">
        <div class="row">
            <div class="col-lg-3 col-sm-6">
                <div class="input-wrap">
                    <label for="" class="input--required">Form Name </label>
                    <material-dropdown [searchable]="true" [selectedOption]="initialValues.formName" [addable]="true"
                        class="dropDownWidth"
                        [postApiUrl]="newFormaNameOptionApiUrl" [params]="formNameParam" (postApiResponse)="getAddedFormName($event)"
                        (addValueToList)="addNewFormNameOption($event)">
                        <select #customSelect formControlName="form_name" class="no-style select--modify">
                            <option *ngFor="let option of formNames" value="{{ option.id }}">
                                {{ option.label }}
                            </option>
                        </select>
                    </material-dropdown>
                    <app-error [controlName]="inspectionForm.controls.form_name"></app-error>

                </div>
            </div>


            <div class="col-xl-3 col-lg-3 col-6">
                <div class="input-wrap clearfix mb-0">
                    <label for="" class="input">Description</label>
                    <input type="text" class="no-style input--bd" formControlName="description"
                        placeholder="123456" value="">
                </div>
            </div>
        </div>
        <div class="d-flex justify-content-between align-items-center py-2 px-3">
            <p class="fw-semibold"></p>
            <button class="btn btn--primary" (click)="addVehicleInspection()"> + Add Inspection </button>
        </div>
        <div class="addable-row-table mx-2 mb-2 def-color addable-row-table-display">
            <table>
                <thead>
                    <tr>
                        <th >S NO.</th>
                        <th  class="ws-nowrap">DETAIL NAME </th>
                        <th  class="text-center">ATTACHED FILE </th>
                        <th  >FIELDS NAME</th>
                        <th>FIELDS TYPE</th>
                        <th class="text-center">MANDATORY</th>
                        <th></th> 
                    </tr>
                </thead>
                <tbody *ngIf="inspectionDetails.length==0">
                    <tr class="border-0">
                        <td class="bg-white" colspan="30">
                            <div class="no-list-data-wrap">
                                <figure>
                                    <img src="assets/img/no-content.png" alt="">
                                </figure>
                                <h5 class="mt-3 primary-brand-text">No Inspection details configured!</h5>
                            </div>
                        </td>
                    </tr>
    
                </tbody>
                <tbody >
    
                        <tr  *ngFor="let data of inspectionDetails;let i = index">
                            <td >{{i+1}}</td>
                            <td >{{data?.name}}</td>
                            <td class="text-center" ><span  (click)="viewUploadedDocument(data?.documents)" *ngIf="data?.documents?.length != 0" class="material-icons sky-blue-text cursor-pointer"> image </span></td>
                            <td class="fields-wrap">
                                
                                    <div class="field" *ngFor="let checklistData of data['checklist']">
                                       {{checklistData?.field_label}}
                                    </div>
                                
                            </td>
                            <td class="fields-wrap">
                              
                                    <div class="field" *ngFor="let checklistData of data['checklist']">
                                       {{convertTYpe(checklistData?.field_type)}}
                                    </div>
                                
                            </td>
                            <td class="fields-wrap">
    
                                <div *ngFor="let checklistData of data['checklist']" class="d-flex justify-content-center align-items-center field text-center" >
                                    <mat-checkbox color="primary" (change)="makeMandatory($event.checked,checklistData,data.id)"  [checked]="checklistData.mandatory"></mat-checkbox>
                                </div>
    
                            </td>
                           
                            <td >
                                <div  class="d-flex align-items-center justify-content-end">
                                    <button  class="gb-btn-hover me-2 cursor-pointer" (click)="editVehicleInspection(data,i)"><i  class="material-icons def-color fs-5">edit</i></button>
                                    <button  (click)="deleteVehicleInspection(i)" class="gb-btn-hover me-2 cursor-pointer"><i  class="material-icons text-danger fs-5">delete</i></button>
                                </div>
                            </td>
                         
                           
                        </tr>
                   
                </tbody>
            </table>
        </div>
        <div class="footer-bg p-2 px-4 custom-footer-bg d-flex justify-content-end">
            <button class="btn btn--sm me-2" type="button"  [routerLink]="[prefixUrl+'/organization_setting/settings/'+inspectionType+'-inspection/custom-field']">Cancel</button>
            <button class="btn btn--primary btn--sm" (click)="submitForm()">{{inspectionId?'Update':'Save'}}</button>
        </div>
    </form>
</div>


<app-view-uploaded-document *ngIf="viewUploadedDocs.show"
  [viewUploadedDocs]="viewUploadedDocs"></app-view-uploaded-document>

