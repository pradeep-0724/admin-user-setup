<app-add-prefix [parentForm]="generalConfigurationForm" [isFormValid]="isFormValid"  [canShowUpdateButton]="false" [key]='prefixKey'></app-add-prefix>
<app-pdf-heading-native  [parentForm]="generalConfigurationForm" [isFormValid]="isFormValid" [canShowUpdateButton]="false"  [key]="prefixKey"></app-pdf-heading-native>

<div>

<form style="padding: 30px;padding-top: 0px !important;" [formGroup]="generalConfigurationForm">
    <div  class="mx-2 mb-4">
        <div class="toggle-wrapper d-flex align-items-center h-100 mb-4">
            <span class="toggle-label  fs-6 fw-semibold def-color">Show Shipping Address in PDF</span>
            <label for="show_shipping_address" class="toggle-switch">
                <input type="checkbox" id="show_shipping_address" formControlName="show_shipping_address">
                <span class="toggle-box">
                    <span class="toggle-circle"></span>
                </span>
            </label>
        </div>
    </div>  

    <!-- Tax... -->
    <div [ngClass]="{'hiddenContent':!isTax}" class="row mx-0 mb-4" *ngIf="prefixKey=='invoice'">
        <p class="col-lg-12 mb-4 fs-6 fw-semibold def-color"> Default Tax on {{screenName}}
            <app-tool-tip class="tool-tip-position trip-no" [totalSlides]="tripToolTipForDefaultTax.content.length"
                position="right" [toolTipContent]="tripToolTipForDefaultTax"></app-tool-tip>
        </p>
        <div class="tax-input-box tax-input-box-big col-4 mx-2 p-0" style="width: 240px;">
            <span for="" class="ws-nowrap" style="padding: 13px 20px 10px 20px;">Tax</span>
            <material-dropdown [selectedOption]="defaultTax">
                <select #customSelect class="no-style select--modify" formControlName="default_tax" [(ngModel)]="trip_challan_tax">
                    <option *ngFor="let option of taxOptions" value="{{ option.id }}">
                        {{ option.label }}
                    </option>
                </select>
            </material-dropdown>
        </div>
    </div>

    <!-- PDF Table -->
    <div  class="mx-2 mb-4">
        <p class="col-lg-12 mb-4 fs-6 fw-semibold def-color"> Signature Fields in PDF </p>
        <div class="addable-row-table" style="width: 50%;">
            <table>
                <thead>
                    <tr>
                        <th></th>
                        <th>Field Name</th>
                        <th>Display in PDF</th>
                    </tr>
                </thead>
                <ng-container formGroupName="signatory">
                    <tbody>
                        <tr formGroupName="for_company">
                            <td class="fw-semibold">Company Name :</td>
                            <td>
                                <input style="width: 90%;" formControlName="term" type="text" placeholder="Enter company name"
                                [ngClass]="{
                                    error:
                                    generalConfigurationForm.controls.signatory.get('for_company').get('term').invalid &&
                                    generalConfigurationForm.controls.signatory.get('for_company').get('term').touched
                                  }" />
                            </td>
                            <td>
                                <label class="toggle-switch">
                                    <input type="checkbox" formControlName="display">
                                    <span class="toggle-box">
                                        <span class="toggle-circle"></span>
                                    </span>
                                </label>
                            </td>
                        </tr>
                        <tr formGroupName="authorised_signatory">
                            <td class="fw-semibold">Authorised Signatory :</td>
                            <td>
                                <input style="width: 90%;" formControlName="term" type="text" placeholder="Enter signatory name" 
                                [ngClass]="{
                                    error:
                                    generalConfigurationForm.controls.signatory.get('authorised_signatory').get('term').invalid &&
                                    generalConfigurationForm.controls.signatory.get('authorised_signatory').get('term').touched
                                  }"  />
                            </td>
                            <td>
                                <label class="toggle-switch">
                                    <input type="checkbox" formControlName="display">
                                    <span class="toggle-box">
                                        <span class="toggle-circle"></span>
                                    </span>
                                </label>
                            </td>
                        </tr>
                        <tr formGroupName="prepared_by">
                            <td class="fw-semibold">Prepared By :</td>
                            <td>
                                <input style="width: 90%;" formControlName="term" type="text" placeholder="Enter name"
                                [ngClass]="{
                                    error:
                                    generalConfigurationForm.controls.signatory.get('prepared_by').get('term').invalid &&
                                    generalConfigurationForm.controls.signatory.get('prepared_by').get('term').touched
                                  }"  />
                            </td>
                            <td>
                                <label class="toggle-switch">
                                    <input type="checkbox" formControlName="display">
                                    <span class="toggle-box">
                                        <span class="toggle-circle"></span>
                                    </span>
                                </label>
                            </td>
                        </tr>
                        <tr formGroupName="received_by">
                            <td class="fw-semibold">Received By :</td>
                            <td>
                                <input style="width: 90%;" formControlName="term" type="text" placeholder="Enter name"
                                [ngClass]="{
                                    error:
                                    generalConfigurationForm.controls.signatory.get('received_by').get('term').invalid &&
                                    generalConfigurationForm.controls.signatory.get('received_by').get('term').touched
                                  }" />
                            </td>
                            <td>
                                <label class="toggle-switch">
                                    <input type="checkbox" formControlName="display">
                                    <span class="toggle-box">
                                        <span class="toggle-circle"></span>
                                    </span>
                                </label>
                            </td>
                        </tr>
                        <tr formGroupName="verifed_by">
                            <td class="fw-semibold">Verified By :</td>
                            <td>
                                <input style="width: 90%;" formControlName="term" type="text" placeholder="Enter name"
                                [ngClass]="{
                                    error:
                                    generalConfigurationForm.controls.signatory.get('verifed_by').get('term').invalid &&
                                    generalConfigurationForm.controls.signatory.get('verifed_by').get('term').touched
                                  }" />
                            </td>
                            <td>
                                <label class="toggle-switch">
                                    <input type="checkbox" formControlName="display">
                                    <span class="toggle-box">
                                        <span class="toggle-circle"></span>
                                    </span>
                                </label>
                            </td>
                        </tr>
                        <tr formGroupName="approved_by">
                            <td class="fw-semibold">Approved By :</td>
                            <td>
                                <input style="width: 90%;" formControlName="term" type="text" placeholder="Enter name" 
                                [ngClass]="{
                                    error:
                                    generalConfigurationForm.controls.signatory.get('approved_by').get('term').invalid &&
                                    generalConfigurationForm.controls.signatory.get('approved_by').get('term').touched
                                  }"/>
                            </td>
                            <td>
                                <label class="toggle-switch">
                                    <input type="checkbox" formControlName="display">
                                    <span class="toggle-box">
                                        <span class="toggle-circle"></span>
                                    </span>
                                </label>
                            </td>
                        </tr>
                    </tbody>
                </ng-container>
                
            </table>
        </div>
    </div>

    <!-- Repeat Header -->
    <!-- <div  class="mx-2 mb-4">
        <p class="col-lg-12 mb-4 fs-6 fw-semibold def-color"> Repeat Header
            <app-tool-tip class="tool-tip-position trip-no" [totalSlides]="tripToolTipForPDFHeader.content.length"
                position="right" [toolTipContent]="tripToolTipForPDFHeader"></app-tool-tip>
        </p>
        <div class="col-2 mb-4">
            <material-dropdown [searchable]="true" [addable]="false" [selectedOption]="repeatHeader">
                <select #customSelect class="no-style select--modify" formControlName="header_preference">
                    <option *ngFor="let option of headerFooterOptions" value="{{ option?.value}}">
                        {{ option?.label }}
                    </option>
                </select>
            </material-dropdown>
        </div>
    </div> -->

    <!-- Repeat Footer -->
    <!-- <div  class="mx-2 mb-4">
        <p class="col-lg-12 mb-4 fs-6 fw-semibold def-color"> Repeat Footer
            <app-tool-tip class="tool-tip-position trip-no" [totalSlides]="tripToolTipForPDFFooter.content.length"
                position="right" [toolTipContent]="tripToolTipForPDFFooter"></app-tool-tip>
        </p>
        <div class="col-2">
            <material-dropdown [searchable]="true" [addable]="false" [selectedOption]="repeatFooter">
                <select #customSelect class="no-style select--modify" formControlName="footer_preference">
                    <option *ngFor="let option of headerFooterOptions" value="{{ option?.value}}">
                        {{ option?.label }}
                    </option>
                </select>
            </material-dropdown>
        </div>
    </div> -->
    <!-- System Generated Note -->
    <ng-container formGroupName="disclaimer">
        <div  class="mx-2 mb-4">
            <div class="toggle-wrapper d-flex align-items-center h-100 mb-4">
                <span class="toggle-label  fs-6 fw-semibold def-color">System Generated Note</span>
                <label for="toggle" class="toggle-switch">
                    <input type="checkbox" id="toggle" formControlName="display">
                    <span class="toggle-box">
                        <span class="toggle-circle"></span>
                    </span>
                </label>
            </div>
            <div class="input-wrap input-box ">
                <textarea class="p-3 w-100" class="error-box w-100 p-2" formControlName="term" [maxlength]="255" [minlength]="1"
                    min="2" rows="6" placeholder="Enter your business notes" 
                    [ngClass]="{
                        error:
                        generalConfigurationForm.controls.signatory.get('verifed_by').get('term').invalid &&
                        generalConfigurationForm.controls.signatory.get('verifed_by').get('term').touched
                      }"  ></textarea>
            </div>
        </div>    

    </ng-container>

    <div  class="mx-2 mb-4">
        <div class="d-flex align-items-center h-100 mb-4">
            <span class="toggle-label  fs-6 fw-semibold def-color">Narration</span>
           
        </div>
        <div class="input-wrap input-box ">
            <textarea class="p-3 w-100" class="error-box w-100 p-2" formControlName="narration" 
                min="2" rows="6" placeholder="Enter your business narration"></textarea>
        </div>
    </div>  
    <!-- Powered By TransportSimple -->
    <div  class="mx-2 mb-4">
        <div class="toggle-wrapper d-flex align-items-center h-100 mb-4">
            <span class="toggle-label  fs-6 fw-semibold def-color">Powered By TransportSimple<app-tool-tip
                    class="tool-tip-position trip-no" [totalSlides]="tripToolTipForBrandingLine.content.length"
                    position="right" [toolTipContent]="tripToolTipForBrandingLine"></app-tool-tip> </span>
            <label for="toggle1" class="toggle-switch">
                <input type="checkbox" id="toggle1" formControlName="include_branding">
                <span class="toggle-box">
                    <span class="toggle-circle"></span>
                </span>
            </label>
        </div>
    </div>
</form>

<app-add-tac  [canSaveInline]="false" (displayTNCOnSamPage)="displayTNCOnSamPage($event)" [key]="tncKey"></app-add-tac>

<div class="col-lg-12 d-flex justify-content-end" style="padding: 30px;">
    <button class="updateMark" style="border-radius: 5px;" (click)="upadteConfiguration()">
      <span class="updateText">{{updateText}}</span>
      <span class="successTest"  [ngClass]="{'successTickmark': successMsg}"></span>
    </button>
</div>
 
</div>