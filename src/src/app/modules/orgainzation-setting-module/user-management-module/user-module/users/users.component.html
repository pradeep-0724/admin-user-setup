<div class="p-4 layout-bg" *ngIf="!canAdd">
  <div class="info-msg">
    <p class="message-cont">
      Please Note: Maximum Users Limit ({{ maxUser }}) reached for the tenant,
      Please delete inactive users or contact the TransportSimple team to
      increase the Limit
    </p>
  </div>
</div>
<div>
  <div class="px-4 py-3" *ngIf="canAdd">
    <button class="btn btn--primary ms-auto w-auto" (click)="openDialog()">
      + Add User
    </button>
  </div>

  <div class="addable-row-table addable-row-table-display mx-2 mb-2">
    <table>
      <thead>
        <tr>
          <th>User Name</th>
          <th>Role</th>
          <th>User Email</th>
          <th class="border-end-0">Status</th>
          <th class="border-start-0"></th>
        </tr>
      </thead>
      <tbody *ngIf="sortedData.length == 0">
        <tr class="border-0">
          <td class="bg-white" colspan="30">
            <div class="no-list-data-wrap">
              <figure>
                <img src="assets/img/no-content.png" alt="" />
              </figure>
              <h5 class="mt-3 primary-brand-text">No data found!</h5>
            </div>
          </td>
        </tr>
      </tbody>
      <tbody>
        <tr *ngFor="let user of sortedData; let i = index">
          <td>{{ user?.user_name }}</td>
          
          <td>
            <span *ngFor="let role of user?.roles;let i = index">{{ i==user?.roles?.length-1?role:role+', ' }}</span>
          </td>
          <td>{{ user?.email }}</td>
          <td class="border-end-0">{{ user?.status }}</td>
          <td class="border-start-0">
            <div class="d-flex align-items-center justify-content-end" *ngIf="
            user.status != 'DELETED' ||
            (user.status == 'DELETED' && canAdd)
          ">
          <ng-container *ngIf="user.status != 'DELETED'">
            <span matTooltipPosition="above" matTooltipClass="mat-normal-tooltip" matTooltip="Edit"  class="gb-btn-hover me-2 cursor-pointer" (click)="edit(user.id, i)"
                ><i class="material-icons def-color fs-5">edit</i></span
              >
          </ng-container>

          <ng-container *ngIf="i > 0 && user.status != 'DELETED'">
            <span class="gb-btn-hover me-2 cursor-pointer"*ngIf="user?.status !== 'ACTIVE'"matTooltipPosition="above" matTooltipClass="mat-normal-tooltip" matTooltip="Re-send Invite"   (click)="resendInvite(user.id)"
            ><i class="material-icons sky-blue-text fs-5">forward_to_inbox</i></span
          >
           
            <span class="gb-btn-hover me-2 cursor-pointer"matTooltipPosition="above" matTooltipClass="mat-normal-tooltip" matTooltip="Delete"  (click)="popupFunction(user.id, i)"
            ><i class="material-icons text-danger fs-5">delete</i></span
          >
          </ng-container>

         
          <ng-container
                    *ngIf="i > 0 && user.status == 'DELETED' && canAdd"
                  >
                  <span class="gb-btn-hover me-2 cursor-pointer" matTooltipPosition="above" matTooltipClass="mat-normal-tooltip" matTooltip="Mark Active "  (click)="markActive(user.id)"
            ><i class="bi bi-person-fill-check green-text" style="font-size: 21px;"></i></span
          >
                  </ng-container>

            </div>
          </td>
          
        </tr>
      </tbody>
    </table>
  </div>
</div>


<alert-popup
  [inputData]="popupInputData"
  (outputData)="confirmButton($event)"
></alert-popup>
<alert-popup [inputData]="popupInputAddRole" ></alert-popup>

