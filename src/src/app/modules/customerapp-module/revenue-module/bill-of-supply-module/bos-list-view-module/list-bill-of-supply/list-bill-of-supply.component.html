<div [ngClass]="{'border-2':routeToDetail,'border-bottom':routeToDetail}">
  <app-list-widget [isFilter]="true" [isDateRangeText]="true" [isDateDropDown]="true" [isDateRange]="false" [isDropDown]="true"
    [isAddButton]="true" [filterUrl]="filterUrl" [isExport]="true" [subtractDays]="30" [end_date]="end_date"
    [tabSelectionList]="tabSelectionList"(exportList)="exportList($event)" (listWidgetData)="listWidgetData($event)" [buttonData]="buttonData">
  </app-list-widget>
</div>
<div class="alert-msg" *ngIf="apiError">
  <span class="icon-wrap"></span>
  <p class="message-cont">{{ apiError }}</p>
</div>
<div class="container-fluid">
  <div class="row">

    <div class="custom-table-container fuel-list-height bg-white  fuel-list-wrap  p-0"
      [ngClass]="routeToDetail?'col-lg-4':'col-lg-12'" (scroll)="onScroll($event)">
      <table [ngClass]="{'h-100':billOfSupllyList.length==0}">

        <thead *ngIf="!routeToDetail">
          <tr>
            <th>BOS DATE</th>
            <th>BOS NUMBER</th>
            <th>CUSTOMER</th>
            <th>DUE DATE</th>
            <th>TOTAL BOS ({{currency_type.symbol}})</th>
            <th>BOS BALANCE ({{currency_type.symbol}})</th>
            
           
            <th>STATUS</th>
            <th class="icon-box"></th>
          </tr>
        </thead>
        <tbody *ngIf="billOfSupllyList.length == 0">
          <tr class="border-0">
            <td class="bg-white" colspan="30">
              <div class="no-list-data-wrap">
                <figure>
                  <img src="assets/img/no-content.png" alt="">
                </figure>
                <h5 class="mt-3 primary-brand-text">No data found!</h5>
              </div>
            </td>
          </tr>

        </tbody>

        <tbody>
          <tr *ngFor="let data of billOfSupllyList" [ngClass]="{'activated-row':selectedId==data.id && routeToDetail}">
            <ng-container *ngIf="routeToDetail">
              <td (click)="createQueryParems(data.id)" class="cursor-pointer">
                <div class=" mb-3 fs-6 fw-semibold ">{{data.party.display_name}}</div>
                <div>
                  <span class="link fw-medium " >{{data.bos_number}}</span>
                  <span class="detail-date"> {{data.bos_date}}</span>
                </div>
              </td>
              <td (click)="createQueryParems(data.id)" class="cursor-pointer">
                <div class=" mb-3 fs-6 fw-semibold text-end">{{currency_type.symbol}} {{data.total_amount| numberFormat}}</div>
                <div class=" text-end">
                  {{data.status}}
                </div>

              </td>
            </ng-container>

            <ng-container *ngIf="!routeToDetail">
              <td>{{dateChange(data.bos_date) }}</td>
            <td class="tabIndexActive">
             <button class="custom-link p-0" (click)="createQueryParems(data.id)"> {{data.bos_number}}</button>
            </td>
            <td><a class="custom-link" target="_blank" [routerLink]="[prefixUrl+'/onboarding/party/details/client/'+data.party.id]">{{data.party?data.party.display_name:'-'}}</a></td>
            <td>
              {{ data?.due_date ? dateChange(data?.due_date):'-' }}
            </td>
            <td class="rupee-symbol rupee-symbol--sm">
              {{data.total_amount| numberFormat}}
            </td>
            <td class="rupee-symbol rupee-symbol--sm">
              {{data.balance | numberFormat}}
            </td>
            
            
            <td>{{data.status?data.status:'-'}}</td>
              <td class="icon-box  tabIndexActive">
                <div class="d-flex justify-content-center align-items-center">
                  <div class="position-relative">
                    <i class="material-icons more-icon" (click)="optionsList(data.id)"
                      *ngxPermissionsOnly="[bosPermission[1],bosPermission[2]]">more_vert</i>
                    <ul class="more-actions__menu table-popup" [ngClass]="{show: showOptions === data.id}">
                      <li class="more-actions__item" *ngxPermissionsOnly="bosPermission[1]"
                      [routerLink]="[prefixUrl+'/income/billofsupply/edit', data.id]"><i
                          class="material-icons">edit</i>Edit</li>
                            <li *ngxPermissionsOnly="bosPermission[2]" class="more-actions__item"
                              (click)="popupFunction(data, i)"><i class="material-icons">delete</i>Delete</li>
                              <li class="more-actions__item w-100 text-start" (click)="routeToDetailById(data.id, true)">
                                <i class="material-icons">cloud_download</i>Download
                              </li>
                    </ul>
                  </div>
                </div>

              </td>
            </ng-container>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="col-lg-8 p-0  pdf-viewer">
      <app-billofsupply-details *ngIf="routeToDetail" [routeToDetail]="routeToDetail" (openDetailsEmitter)="openListDetailsData($event)"  [billofsupplyId]="billofsupply_id" [defaultDownload]="defaultDownload">
      </app-billofsupply-details>
    </div>

  </div>
</div>



<alert-popup [inputData]="popupInputData" (outputData)="confirmButton($event)"></alert-popup>
