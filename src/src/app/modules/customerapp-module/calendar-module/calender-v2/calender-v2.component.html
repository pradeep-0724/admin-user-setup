<div class="px-3 py-2 d-flex justify-content-between flex-wrap calendar-filter">
    <div class="d-flex align-items-center">

        <mat-select class="gb-outline-select" panelClass="gb-veh-select-panel" [formControl]="vehicleCatagory"
            (selectionChange)="onChangeVehicleCategory()">
            <mat-option *ngFor="let option of tabSelectionList " [value]="option?.value">{{option?.label}}</mat-option>
        </mat-select>
        <ng-container *ngIf="vehicleCatagory.value !='-1' && specificationList.length">
            <mat-select style="min-width: 150px;" class="gb-outline-select ms-2" placeholder="Specifications"
                [formControl]="selectSpecification" (selectionChange)="onchageSpecification()">
                <mat-option *ngFor="let option of specificationList "
                    [value]="option?.specification">{{option?.specification}}</mat-option>
            </mat-select>
        </ng-container>
    </div>
    <div class="d-flex flex-wrap align-items-center">
        <div class="tabs-info " (click)="isOpen = !isOpen" cdkOverlayOrigin #triggerTabsInfo="cdkOverlayOrigin">
            <span class="material-icons me-2">
                info_outline
            </span>
            Table Tabs info.

        </div>

        <div class="date-select ms-2">
            <button mat-icon-button (click)="previousWeek()">
                <span class="material-icons">arrow_left</span>
            </button>
            <input matInput style="width: 0px; border: unset; display: inline-block;" [matDatepicker]="date"
                [formControl]="calendarDate" (dateChange)="dateSelected()">
            <span class="date-range" (click)="date.open()" matRipple>{{dateRange}}</span>
            <mat-datepicker #date></mat-datepicker>
            <button mat-icon-button (click)="nextWeek()">
                <span class="material-icons">arrow_right</span>
            </button>

        </div>
        <div class="gb-search-filter ms-2">

            <input type="text" [formControl]="search" placeholder="Search" />

            <span class="search-icon">
                <i class="bi bi-search"></i>
            </span>

        </div>
        <button class="btn btn--primary w-auto ms-2" (click)="bookVehicle()"> Block Vehicle</button>
    </div>
</div>

<div class="calendar-wrap" cdkScrollable id="calendar-table" (scroll)="onScroll($event)" >
    <table [ngClass]="{'h-100':calenderdata.length==0}">
        <thead>
            <tr>

                <th class="text-center sticky-left veh-no-header">
                    VEHICLE NO.
                </th>

                <th *ngFor="let day of weekLength">
                    <div class="header-date">
                        <div class="day">{{getDay(daysOfWeek[day])}}</div>
                        <div class="date" [ngClass]="{'active':getActiveDate(daysOfWeek[day])}">
                            {{getdate(daysOfWeek[day])}}</div>
                    </div>
                </th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let data of calenderdata">
                <td class="vehicle-wrap  sticky-left" [ngClass]="getVehicleType(data?.vehicle)">
                    {{data?.vehicle?.reg_num}}</td>
                <td *ngFor=" let task of data?.calenderdetails">
                    <app-calendar-task [task]="task" (taskEvent)="taskEvent($event)"></app-calendar-task>
                </td>
            </tr>
            <tr class="border-0" *ngIf="calenderdata.length==0">
                <td class="bg-white" colspan="30">
                  <div class="no-list-data-wrap  ">
                    <figure>
                      <img src="assets/img/no-content.png" alt="">
                    </figure>
                    <h5 class="mt-3 primary-brand-text">No data found!</h5>
                  </div>
                </td>
              </tr>
        </tbody>
    </table>

</div>

<div *ngIf="isOpen" class="custom-backdrop" (click)="toggleOverlay()"></div>
<ng-template cdkConnectedOverlay [cdkConnectedOverlayOrigin]="triggerTabsInfo" [cdkConnectedOverlayOpen]="isOpen"
    (overlayOutsideClick)="isOpen=false" [cdkConnectedOverlayPositions]="[
  {
    originX: 'start',
    originY: 'bottom',
    overlayX: 'start',
    overlayY: 'top'
  },
  {
    originX: 'end',
    originY: 'bottom',
    overlayX: 'end',
    overlayY: 'top'
  },
  {
    originX: 'end',
      originY: 'top',
      overlayX: 'end',
      overlayY: 'bottom'
  }
 
  
  ]">
    <div class="tabs-info-tooltip">
        <p class="mb-3 fw-semibold">Icons</p>
        <div class="d-flex align-items-center mb-2">
            <span class="material-icons pending-text me-3">
                construction
            </span>: Maintenance

        </div>
        <div class="d-flex align-items-center border-bottom mb-3 pb-3">
            <span class="material-icons me-3 error-text">
                insert_drive_file
            </span>: Document Expiry

        </div>
        <p class="mb-2 fw-semibold">Lines</p>

        <div class="mb-3">
            <span class="line line-yellow"></span>
            : Schedule Jobs
        </div>
        <div class="mb-3">
            <span class="line line-sky-blue"></span>
            : Ongoing Jobs
        </div>
        <div class="mb-3">
            <span class="line line-green"></span>
            : Completed Jobs/ Maintenance
        </div>
        <div class="mb-3">
            <span class="line line-purple"></span>
            : Multi Jobs
        </div>
        <div class="mb-3">
            <span class="line line-red"></span>
            : Void
        </div>
        <div>
            <span class="line line-grey"></span>
            : Vehicle Blocked
        </div>


    </div>
</ng-template>