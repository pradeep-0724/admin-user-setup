<div class="calc-height">
  <app-list-widget [listTitle]="'Local Purchase Order'" [isDateDropDown]="false" [isFilter]="true" [isSettings]="true"
    [settingsUrl]="settingsUrl" (listWidgetData)="listWidgetData($event)" [buttonData]="buttonData" [isAddButton]="true"
    [filterUrl]="filterUrl" (settingsApplied)="settingsApplied($event)">

  </app-list-widget>
</div>



<div>
  <div class="custom-table-container ws-nowrap" (scroll)="onScroll($event)" id="lpo-list">
    <table [ngClass]="{'h-100':lpoList.length==0}">

      <thead>
        <tr>

          <ng-container *ngFor="let heading of lpoListHeader">
            <th> {{heading}} </th>
          </ng-container>
          <th class="icon-box"></th>
        </tr>
      </thead>
      <tbody *ngIf="lpoList.length == 0">
        <tr class="border-0">
          <td class="bg-white" colspan="30">
            <div class="no-list-data-wrap">
              <figure>
                <img src="assets/img/no-content.png" alt="">
              </figure>
              <h5 class="mt-3 primary-brand-text">No data found!</h5>
            </div>
          </td>
        </tr>

      </tbody>
      <tbody>
        <tr *ngFor="let lpo of lpoList; trackBy: trackById ;">
          <ng-container *ngFor="let item of lpo['extras'];let i =index">
            <td class="ws-nowrap" *ngIf="item?.name !='LPO Number' && item?.name !='Vendor' && item?.id !='total_amount'"> {{item?.value ?
              item?.value : '-'}} </td>
            <td class="ws-nowrap" *ngIf="item?.id =='total_amount'"> {{item?.value| numberFormat }} </td>
            <ng-container *ngIf="item?.name=='LPO Number'">
              <td>
                <a class="py-0 custom-link" [routerLink]="[prefixUrl+'/trip/local-purchase-order/view',lpo.id]"
                  [queryParams]="{ formList: 'lpo' }"> {{item?.value?.name}} </a>
              </td>
            </ng-container>
            <td *ngIf="item?.name =='Vendor'" class="td-2l">
              <a class="custom-link text-2l" target="_blank"
                [routerLink]="[preFixUrl+'/onboarding/party/details/vendor/'+item.value.id]">{{item.value.name}}</a>
            </td>
          </ng-container>
          <td class="icon-box  tabIndexActive">
            <div class="d-flex justify-content-center align-items-center" *ngIf="!lpo.is_closed">
              <div class="position-relative" *ngxPermissionsOnly="[lpoPermission[1],lpoPermission[2]]">
                <button class="material-icons more-icon p-0"
                  (click)="optionsList($event, 'list_'+lpo?.id)">more_vert</button>
                <div class="more-actions__menu table-popup" [ngClass]="{show: showOptions === 'list_'+lpo?.id}">
                  <button class="more-actions__item w-100" *ngxPermissionsOnly="lpoPermission[1]"
                    [routerLink]="[prefixUrl+'/trip/local-purchase-order/edit',lpo?.id]"><i
                      class="material-icons">edit</i>Edit</button>
                  <button class="more-actions__item w-100" *ngxPermissionsOnly="lpoPermission[2]"
                    (click)="popupFunction(lpo, i)"><i class="material-icons">delete</i>Delete</button>
                  <button class="more-actions__item w-100" (click)="closeLpo(lpo,i)"
                    *ngxPermissionsOnly="lpoPermission[1]"><i class="material-icons">cancel</i>Close</button>
                </div>
              </div>
            </div>

          </td>


        </tr>
      </tbody>
    </table>
  </div>


</div>
<alert-popup [inputData]="popupInputData" (outputData)="confirmButton($event)"></alert-popup>
<alert-popup [inputData]="popupInputDataClose" (outputData)="lpoClose($event)"></alert-popup>