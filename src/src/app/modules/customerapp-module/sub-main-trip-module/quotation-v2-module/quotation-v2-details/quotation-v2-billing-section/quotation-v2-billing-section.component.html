<div class="quotation-customFields-details">
    <div class="cdc-tab-wrapper">
        <mat-tab-group mat-stretch-tabs="false" class="mat-group" animationDuration="0ms" mat-align-tabs="start">
          <mat-tab>
            <ng-template mat-tab-label>
              <span >Freight</span>
            </ng-template>
            <div>
                <div class="fake-tab my-2 border-bottom pe-4 justify-content-between">
                    <div class="d-flex flex-wrap">
                    <p (click)="fraightTab=1" matRipple class="tab" [ngClass]="{'active-tab':fraightTab==1}">Customer Freight</p>
                    <p (click)="fraightTab=2" matRipple class="tab" [ngClass]="{'active-tab':fraightTab==2}">Additional Charges</p>
                </div>
                </div>
               
                <div *ngIf="fraightTab==1">
                    <div class="def-color" *ngIf="isTax">
                        <p class="px-4 py-3"><b class="me-3 ">Tax :</b>{{quotationDetail?.truck.freights?.tax?.label}}</p>
                    </div>
                    <table>
                        <thead>
                          <tr >
                            
                            <ng-container *ngFor="let col of quotationDetail?.truck.freights?.customizations?.fields">
                            
                              <th *ngIf="col.key !='description' && !col.is_private && col.key != 'rate' &&  col.key != 'total'">{{col.field_label}}</th>
                              <th *ngIf="(col.key !='description' && !col.is_private )&& (col.key === 'rate' || col.key === 'total')">{{col.field_label}} ({{ currency_type?.symbol}})</th>
                              <!-- <th *ngIf="col.key !='description' && !col.is_private && col.key === 'total'">{{col.field_label}} ({{ currency_type?.symbol}})</th> -->
                              <th *ngIf="col.key !='description' && col.is_private">{{col.field_label}} <span class="gb-private-icon " [matTooltip]="'This is a private column'" matTooltipClass="material-toltip-class" matTooltipPosition="above">p</span></th>
                            </ng-container>
                
                          </tr>
                        </thead>
                        <tbody >
                
                          <ng-container *ngFor="let f of quotationDetail?.truck.freights?.freights"
                             >
                            <tr class="custom-field-input-wrap dashed-row">
                              <ng-container *ngFor="let col of quotationDetail?.truck.freights?.customizations?.fields">
                
                                <ng-container *ngIf="col.key != 'billing' && col.key!='make_model' && col.key !='specification' && col.key!='description'">
                                  <ng-container *ngIf="col.field_type!='date'" >
                                    <td>{{f[col.key] ? f[col.key]  : '-'}}</td>
                                  </ng-container>
                                  <ng-container *ngIf="col.field_type=='date'">
                                    <td>{{f[col.key] ? formatDate(f[col.key]) : '-'}}</td>
                                  </ng-container>
                                 
                                </ng-container>
                                <ng-container *ngIf="col.key == 'billing'">
                                    <td>{{f[col.key]?.label ? f[col.key]?.label :'-'}}</td>

                                </ng-container>
                                <ng-container *ngIf="col.key == 'make_model'">
                                    <td>{{f[col.key]?.make?.name?f[col.key]?.make?.name :"-    "  }}&nbsp;&nbsp;|&nbsp;&nbsp;{{ f[col.key]?.model?.name ?f[col.key]?.model?.name :'     -'}}</td>

                                </ng-container>
                                <ng-container *ngIf="col.key == 'specification'">
                                    <td>{{f[col.key]?.label ? f[col.key]?.label :'-'}}</td>

                                </ng-container>

                              </ng-container>
                
                            </tr>



                            <tr >
                             
                                <ng-container *ngFor="let col of quotationDetail?.truck.freights?.customizations?.fields">
                                <td [attr.colspan]="quotationDetail?.truck.freights?.customizations?.fields?.length" *ngIf="col.key =='description'"  >
                                   <span *ngIf="f[col.key]" class=" fw-semibold">Description :<span class="fw-normal ms-2">{{f[col.key]}}</span> </span> <span class="fw-semibold " *ngIf="!f[col.key]">No description added.</span>

                                
                                </td>
                                </ng-container>
                              
                              
                            </tr> 
                
                          </ng-container>
                
                
                
                        </tbody> 
                      </table>

                      <div class="mx-4 mb-2">
                        <p class="fw-semibold pb-3 border-bottom my-4 fs-6">Material Info.</p>
                        
                        <div class="addable-row-table addable-row-table-display ">
                          <table>
                              <thead>
                                  <tr>
                
                                    <th width="20%">Material</th>
                                    <th>Unit</th>
                                    <th>No. of Item</th>
                                    <th>Weight/Item </th>
                                    <th >Volume/Item (Length x Width x Height) </th>
                                    <th>Total Quantity</th>
                                  </tr>
                
                              </thead>
                              <tbody  >
                                <tr *ngIf="quotationDetail?.truck?.materials.length==0">
                                  <td colspan="10" style="background-color: #fff">
                                      <div class="no-content-wrapper h-100">
                                          <figure class="no-content-pic mb-3">
                                              <img src="assets/img/no-content.png" alt="">
                                          </figure>
                                          <div class="no-content-txt ">
                                              <h5 class="heading fs-5 mb-0">No data found!</h5>
                                          </div>
                                      </div>
                                  </td>
                                </tr>
                
                                  <tr *ngFor="let item of quotationDetail?.truck?.materials;let i=index">
                                      <td > 
                                        {{item?.material?.name ? item?.material?.name : '-'}}
                                       
                                      </td>
                                      <td>{{item?.unit?.label ? item?.unit?.label : '-'}}</td>
                                      <td>{{item?.no_of_items ? item?.no_of_items : '-'}}</td>
                                      <td>{{item?.weight_per_item ? item?.weight_per_item : '-'}} {{item?.weight_unit ? item?.weight_unit?.label : ''}}</td>
                                      <td style="padding-top: 0px !important;padding-bottom: 0px !important;"><div class="d-flex align-items-center lbh-wrap ">
                                        <div class="lbh-box">{{item?.length ? item?.length : '-'}}</div>
                                        <span  class="material-icons"> close </span>
                                        <div class="lbh-box">{{item?.breadth ? item?.breadth : '-'}}</div>
                                        <span  class="material-icons"> close </span>
                                        <div class="lbh-box">{{item?.height ? item?.height :'-'}}</div>
                                        <span class="ms-2">{{item?.volume_unit ? item?.volume_unit?.label : ''}}</span>

                                      </div></td>
                                      <td>{{item?.total_quantity  ? item?.total_quantity : '-'}}</td>
                                  </tr>
                              </tbody>
                          </table>
                      </div>
                      </div>
                </div>
            
                <div *ngIf="fraightTab==2">
                    <table>
                        <thead>
                          <tr>
                            
                            <th>Additional Charge</th>
                            <th *ngIf="isTax">Tax</th>
                            <th>Unit Of Measurement</th>
                            <th>No Of Units	</th>
                            <th>Unit Cost ({{ currency_type?.symbol}})</th>
                            <th>Total Amount ({{ currency_type?.symbol}})</th>
                
                          </tr>
                        </thead>
                        <tbody >
                
                          <tr *ngFor="let otherCharge of quotationDetail?.truck.others?.others"
                             >
                             <td>{{otherCharge?.item?.name ? otherCharge?.item?.name : '-'}}</td>
                             <td *ngIf="isTax">{{otherCharge?.tax ? otherCharge?.tax?.label :'-'}}</td>
                             <td>{{otherCharge?.unit?.label ? otherCharge?.unit?.label : '-'}}</td>
                             <td>{{otherCharge?.quantity}}</td>
                             <td>{{otherCharge?.unit_cost| numberFormat}}</td>
                             <td>{{otherCharge?.total_amount| numberFormat}}</td>
                           
                        </tr>
                
                
                
                        </tbody> 
                      </table> 

                </div>
                <app-quotation-v2-calculation-section [quotationDetail]="quotationDetail"></app-quotation-v2-calculation-section>

            
                
            </div>
            
            </mat-tab>
            <mat-tab>
              <ng-template mat-tab-label>
                <span>T&C and Signature</span>
              </ng-template>
              <app-quotation-v2-terms-condition-section
                [quotationDetail]="quotationDetail[findCategory(quotationDetail.vehicle_category)]"></app-quotation-v2-terms-condition-section>
            </mat-tab>
            <mat-tab>
              <ng-template mat-tab-label>
                <span>Upload Documents</span>
              </ng-template>
              <div>
                <div class="fw-semibold px-4 mb-4 mt-3 def-color fs-6"> Upload Document</div>
                <div class="d-flex flex-wrap gap-3 px-4" style="zoom:95%">
                  <file-uploader-v2 (onFileUploaded)="fileUploader($event)" fileName="Document Unknown" [uploaderId]="'1234'"
                    [isShowOnlyUpload]="false"></file-uploader-v2>
                  <app-file-delete-view [showInlineEdit]="true" [fileData]="document" *ngFor="let document of quotationDocuments"
                    (fileDeleted)="fileDeleted($event)"></app-file-delete-view>
                </div>
              </div>
            </mat-tab>
        </mat-tab-group> 
      </div>
</div>



