
<div>
  <div class="right-section__header">

    <div class="d-flex align-items-center">
      <p class="trip-id"><button (click)="historyBack()"><i
            class="bi bi-chevron-left"></i></button> {{workOrderDetail?.workorder_no}}</p>
            <div class="veh-category-chip {{getVehicleCategory(workOrderDetail?.vehicle_category)}}" >
              {{getVehicleCategory(workOrderDetail?.vehicle_category)}}
            </div>
    </div>
    <div class="d-flex align-items-center" [ngClass]="{'disabled': workOrderDetail?.closed_status === 'Closed'}">

        <ng-container *ngIf="workOrderDetail.status.status_screen_to_show !=='void'">
          <button class="gb-edit-btn-secondary ms-2"  *ngIf="isSOEdit" [routerLink]="[prefixUrl+'/trip/work-order/edit',workOrderId]">
              <span  class="material-icons"> create </span>Edit</button>
      </ng-container>
      <ng-container *ngIf="workOrderDetail.status.status_screen_to_show =='approved'">
          <button class="gb-btn gb-btn-red ms-2" (click)="closeWorkOrder()" *ngIf="workOrderDetail?.closed_status != 'Closed'">Close</button>
          <button class="gb-btn gb-btn-basic ms-2" (click)="createJob()">Schedule Job</button>
      </ng-container>
      <button class="gb-edit-btn-secondary ms-2" (click)="editRequest()" >
        <span  class="material-icons"> create </span>Edit Request</button>
      <button class="gb-btn gb-btn-basic ms-2"    *ngIf="workOrderDetail.status.status_screen_to_show =='approved'" [routerLink]="[prefixUrl+'/trip/site-inspection/add']"[queryParams]="{salesOrderId: workOrderDetail.id}">Schedule Inspection </button>
      <div matTooltip="Void restriction: Linked invoices must be deleted."
        [matTooltipDisabled]="!workOrderDetail?.invoice_exists" matTooltipClass="material-toltip-class">
        <button class="gb-btn gb-btn-red ms-2" [disabled]="workOrderDetail?.invoice_exists" (click)="openVoidQuotation()"  *ngIf="workOrderDetail.status.status_screen_to_show !='void' && workOrderDetail.status.status_screen_to_show !='approval_rejected'">Void Sales Order  </button>
      </div>
    </div>
  </div>
  <app-add-trip-v2-documents-expiry [locations]="locations" [documentExpiryData]="documentExpiryData"></app-add-trip-v2-documents-expiry>
  <app-work-order-status-block [workOrderDetail]="workOrderDetail"></app-work-order-status-block>

  <div class="">
    <div class=" row mx-0   px-4 py-3  details shadow-inset-bottom line-height-normal">
      <p class="col-lg-4 col-md-6"><b>Customer: </b><a class="custom-link"  target="_blank" [routerLink]="[prefixUrl+'/onboarding/party/details/client/',workOrderDetail?.customer?.id]" >{{workOrderDetail?.customer?.name}}</a></p>
      <p class="col-lg-4 col-md-6 "><b>Sales Order Date: </b>{{changeDatetoNormalFormat(workOrderDetail?.workorder_date)}}</p>
      <p class="col-lg-4 col-md-6 "><b>Sales Order Start Date: </b>{{changeDatetoNormalFormat(workOrderDetail?.workstart_date)}}</p>
      <p class="col-lg-4 col-md-6 "><b>Expected Tenure: </b>{{workOrderDetail?.expected_tenure?.label ? workOrderDetail?.expected_tenure?.label : '-'}}</p>
      <p class="col-lg-4 col-md-6 "><b>Sales Order End Date: </b>{{changeDatetoNormalFormat(workOrderDetail?.workend_date)}}</p>
      <p class="col-lg-4 col-md-6 "><b>Employee In Charge: </b><a *ngIf="workOrderDetail?.employee_in_charge?.id" class="custom-link" [routerLink]="[prefixUrl+'/onboarding/employee/view/',workOrderDetail?.employee_in_charge?.id]"  target="_blank"  >{{workOrderDetail?.employee_in_charge?.display_name}}</a>
        <span *ngIf="!workOrderDetail?.employee_in_charge?.id">-</span></p>
      <p class="col-lg-4 col-md-6 "><b>Quotation No. : </b>
        <a class="py-0 custom-link" target="_blank" [routerLink]="[prefixUrl+'/trip/quotation/details',workOrderDetail?.quotation?.id]"> {{workOrderDetail?.quotation?.quotation_no}} </a></p>
      <p class="col-lg-4 col-md-6 "><b>Reference No. : </b>{{workOrderDetail?.enquiry_no ?workOrderDetail?.enquiry_no:'-'}}</p>
      <p class="col-lg-4 col-md-5"><b>Site Inspection No. :
      </b>  <a class="custom-link" target="_blank" [routerLink]="[prefixUrl+'/trip/site-inspection/view/',workOrderDetail?.site_inspection_no?.id]" [queryParams]="{formList : 'siteInspection'}"> {{ workOrderDetail?.site_inspection_no ? workOrderDetail?.site_inspection_no?.site_inspection_no : '-' }} </a></p>
      <p class="col-lg-4 col-md-6 "><b>Customer POC: </b>{{workOrderDetail?.poc ? workOrderDetail?.poc?.display_name:'-'}}</p>


    </div>

    
  </div>

</div>
<alert-popup [inputData]="popupInputDataClose" (outputData)="workorderClose($event)"></alert-popup>