<div class="form-layout__card">
  <div action="" [formGroup]="tripTaskForm">
  
    
      <div class="row mx-0 p-4 left--section">


        <div class="col-lg-5" formArrayName="trip_task" *ngIf="isOtherTripTask">


          <ng-container *ngFor="let triptask of tripTaskForm['controls']['trip_task']['controls']; let iiii = index;"
            [formGroupName]="iiii">
            <!-- text field -->
            <div class="col-lg-7 col-10" *ngIf="triptask.controls.field_type.value =='string'">
              <div class="input-wrap error" [ngClass]="addErrorClass(triptask.controls.value)">
                <label for="" class="input"
                  [ngClass]="{'input--required':triptask.controls.mandatory.value}">{{triptask.controls.field_label.value}}
                </label>
                <input type="text" class="no-style input--bd" placeholder="ABC123" value="" formControlName="value"
                  (keyup)="tripTaskValueChange(triptask)">

                <app-error [controlName]="triptask.controls.value"></app-error>
              </div>

            </div>
            <!-- Number -->

            <div class="col-lg-7 col-10" *ngIf="triptask.controls.field_type.value =='decimal' ||triptask.controls.field_type.value =='number'">
              <div class="input-wrap error" [ngClass]="addErrorClass(triptask.controls.value)">
                <label for="" class="input"
                  [ngClass]="{'input--required':triptask.controls.mandatory.value}">{{triptask.controls.field_label.value}}</label>
                <input type="text" class="no-style input--bd" positiveThreeDigitDecimalNumber placeholder="12345" value=""
                  formControlName="value" (keyup)="tripTaskValueChange(triptask)">
                <app-error [controlName]="triptask.controls.value"></app-error>
              </div>
            </div>
            <!-- date field -->
            <div class="col-lg-7 col-10 " *ngIf="triptask.controls.field_type.value =='date'">
              <div class="input-wrap error" [ngClass]="addErrorClass(triptask.controls.value)">
                <label for="" class="input"
                  [ngClass]="{'input--required':triptask.controls.mandatory.value}">{{triptask.controls.field_label.value}}</label>

                <div class="trip-task-date-wrap">
                  <mat-form-field>
                    <input matInput [matDatepicker]="date" (focus)="date.open()" formControlName="value"
                      placeholder="DD/MM/YYYY" readonly (dateChange)="tripTaskValueChange(triptask)">
                    <mat-datepicker-toggle matSuffix [for]="date"></mat-datepicker-toggle>
                    <mat-datepicker #date></mat-datepicker>
                  </mat-form-field>
                </div>
                <app-error [controlName]="triptask.controls.value"></app-error>
              </div>
            </div>

            <!-- check box -->
            <div class="col-lg-7 col-10 row align-items-center mx-0 d-inline-flex custom-checkbox-click-label"
              *ngIf="triptask.controls.field_type.value =='checkbox'">
              <div class="input-wrap error m-0 w-100 mb-3" [ngClass]="addErrorClass(triptask.controls.value)">

                <p class="check-box"><label for="consinId"
                    [ngClass]="{'input--required':triptask.controls.mandatory.value}" class="input w-auto d-inline">
                    <input type="checkbox" class=" w-auto d-inline me-2" placeholder="" value="" formControlName="value"
                      (change)="oncheckBoxChange(triptask);tripTaskValueChange(triptask)"> <span
                      class="check-mark d-inline-block align-middle"></span> <span class="label-text">
                      {{triptask.controls.field_label.value}}</span></label></p>

                <app-error [controlName]="triptask.controls.value"></app-error>
              </div>
            </div>

          </ng-container>
        </div>



        <div class="col-lg-7  upload-document-section "[ngClass]='{"border-start":isOtherTripTask}' *ngIf="isFileUpload">
          <h6 class="mb-4 ps-4">UPLOAD DOCUMENTS</h6>
         
          <div class="row right--section ps-3" [ngStyle]="{'border-left':!this.isOtherTripTask?'unset':''}"  formArrayName="trip_task">
            <div class="col-12">
              <div class="row pb-4">
                <ng-container *ngFor="let triptask of tripTaskForm['controls']['trip_task']['controls']; let i = index;"
                  [formGroupName]="i">
                  <!-- upload field -->
                  <div class=" mb-3 col-lg-6 " *ngIf="triptask.controls.field_type.value =='upload'">
                    <div class="input-wrap error" [ngClass]="addErrorClass(triptask.controls.value)">
                      <div class="d-flex align-items-center">
                        <div class="iscompletedbtn  me-3"
                          [ngClass]="{'completed':triptask.controls.value.value.length>0}">
                          <i class="bi bi-check-lg"></i>
                        </div>
                        <span class="me-2 flex-grow-1  def-color ws-nowrap"
                          [ngClass]="{'input--required':triptask.controls.mandatory.value}">{{triptask.controls.field_label.value}}</span>

                        <file-uploader-v2 (onFileUploaded)="fileUploader($event,triptask)"
                          [fileNumber]="triptask.controls.value.value.length"
                          [fileName]="'destination_'+destinationIndex+'_'+triptask.controls.field_label.value"
                          [multiple]="true" [uploaderId]="i" [showFileName]="false"
                          [isShowOnlyUpload]="true"></file-uploader-v2>
                      </div>
                      <app-error [controlName]="triptask.controls.value"></app-error>
                    </div>
                  </div>
                </ng-container>
              </div>
              <div class="d-flex gap-4 flex-wrap ">
                <ng-container *ngFor="let triptask of tripTaskForm['controls']['trip_task']['controls']; let i = index;"
                  [formGroupName]="i">
                  <ng-container *ngIf="triptask.controls.field_type.value =='upload'">
                    <app-file-delete-view [fileData]="file" *ngFor="let file of triptask.controls.value.value"
                      (fileDeleted)="fileDeleted($event,triptask)"></app-file-delete-view>
                  </ng-container>
                </ng-container>
              </div>
            </div>

          </div>


        </div>


      </div>
    

  </div>

</div>