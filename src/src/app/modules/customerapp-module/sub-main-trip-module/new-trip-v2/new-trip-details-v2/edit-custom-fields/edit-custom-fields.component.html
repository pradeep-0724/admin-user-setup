<div class="form-layout__card">
  <div action="" [formGroup]="customField">
    <div class="custom-field-tab-form">
      <!-- Custom Field Section Starts -->
      <div *ngIf="VehicleTripCustomField.length>0" class="p-3">
        <div class="row p-4 " formArrayName="other_details">
          <ng-container *ngFor="let customfiled of customField['controls']['other_details']['controls']; let i = index;"
            [formGroupName]="i">
            <!-- datetime field -->

            <div class="col-lg-3 col-6" *ngIf="customfiled.controls.field_type.value =='datetime'">
              <div class="input-wrap error" [ngClass]="addErrorClass(customfiled.controls.value)">
                <label for="" class="input"
                  [ngClass]="{'input--required':customfiled.controls.mandatory.value}">{{customfiled.controls.field_label.value}}</label>
                  <app-date-and-time-picker [control]="customfiled.get('value')" (dateTimeSelected)="dateTimeSelected($event,customfiled)" ></app-date-and-time-picker>
              </div>
            </div>

            <!-- text field -->
            <div class="col-lg-3 col-6" *ngIf="customfiled.controls.field_type.value =='string'">
              <div class="input-wrap error" [ngClass]="addErrorClass(customfiled.controls.value)">
                <label for="" class="input"
                  [ngClass]="{'input--required':customfiled.controls.mandatory.value}">{{customfiled.controls.field_label.value}}</label>
                <input type="text" class="no-style input--bd" (keyup)="valueChange(customfiled)" placeholder="" value=""
                  formControlName="value">
                <app-error [controlName]="customfiled.controls.value"></app-error>
              </div>
            </div>

            <!-- date field -->
            <div class="col-lg-3 col-6" *ngIf="customfiled.controls.field_type.value =='date'">
              <div class="input-wrap error" [ngClass]="addErrorClass(customfiled.controls.value)">
                <label for="" class="input"
                  [ngClass]="{'input--required':customfiled.controls.mandatory.value}">{{customfiled.controls.field_label.value}}</label>
                <mat-form-field>
                  <input matInput [matDatepicker]="customDateField" readonly (focus)="customDateField.open()"
                    formControlName="value" (dateChange)="valueChange(customfiled)" placeholder="DD/MM/YYYY">
                  <mat-datepicker-toggle matSuffix [for]="customDateField"></mat-datepicker-toggle>
                  <mat-datepicker #customDateField></mat-datepicker>
                </mat-form-field>
                <app-error [controlName]="customfiled.controls.value"></app-error>
              </div>
            </div>

            <!-- check box -->
            <div class="col-lg-3 col-6 row align-items-center mx-0 d-inline-flex custom-checkbox-click-label"
              *ngIf="customfiled.controls.field_type.value =='checkbox'">
              <div class="input-wrap error m-0 w-100 mb-3" [ngClass]="addErrorClass(customfiled.controls.value)">
                <p class="check-box"><label for="consinId-{{i}}" class="input w-auto d-inline"
                    [ngClass]="{'input--required':customfiled.controls.mandatory.value}">
                    <input type="checkbox" class=" w-auto d-inline me-2" name="consinId-{{i}}" id="consinId-{{i}}"
                      placeholder="" value="" formControlName="value"
                      (change)="oncheckBoxChange(customfiled);valueChange(customfiled)"> <span
                      class="check-mark d-inline-block align-middle"></span> <span class="label-text">
                      {{customfiled.controls.field_label.value}}</span></label>
                </p>
                <app-error [controlName]="customfiled.controls.value"></app-error>
              </div>
            </div>
            <!-- drop down -->
            <div class="col-lg-3 col-6" *ngIf="customfiled.controls.field_type.value =='select_option'">
              <div class="input-wrap error" [ngClass]="addErrorClass(customfiled.controls.value)">
                <label for="" class="input"
                  [ngClass]="{'input--required':customfiled.controls.mandatory.value}">{{customfiled.controls.field_label.value}}</label>
                <material-dropdown [searchable]="false" [addable]="false" class="dropDownW"
                  [selectedOption]="customfiled?.controls?.selected_option?.value"
                  [addErrorClass]="customfiled.controls.value">
                  <select #customSelect formControlName="value" class="no-style select--modify "
                    (change)="valueChange(customfiled)">
                    <option *ngFor=" let option of customfiled.controls.option_list.value" value="{{ option }}">
                      {{ option }}
                    </option>
                  </select>
                </material-dropdown>
                <app-error [controlName]="customfiled.controls.value"></app-error>
              </div>
            </div>


          </ng-container>
        </div>

      </div>
      <!-- Custom Field Section Ends -->
    </div>
  </div>
  <ng-container *ngxPermissionsOnly="['super_user']">
    <div class="d-flex  align-items-center justify-content-center " style="height:100px;"
      *ngIf="VehicleTripCustomField.length==0">
      <ng-container *ngIf="isTrip">
        <p> No custom fields added to the Job
          <!-- , You can add custom fields by clicking <span
            class="cursor-pointer text-primary"
            [routerLink]="prefixUrl+'/organization_setting/settings/vehicle-trip/custom-field'"> Here</span> -->
           </p>
      </ng-container>
      <ng-container *ngIf="!isTrip">
        <p> No custom fields added to the Work Order 
          <!-- You can add custom fields by clicking 
          <span
            class="cursor-pointer text-primary"
            [routerLink]="prefixUrl+'/organization_setting/settings/work-order/custom-field'"> Here</span> -->
           </p>
      </ng-container>
    </div>
    <div class="d-flex  align-items-center justify-content-center " style="height:100px;"
      *ngIf="VehicleTripCustomField.length>0">
      <ng-container *ngIf="isTrip">
        <p> You can add more custom fields by clicking<span class="cursor-pointer text-primary"
            [routerLink]="prefixUrl+'/organization_setting/settings/vehicle-trip/custom-field'"> Here</span> </p>
      </ng-container>
      <ng-container *ngIf="!isTrip">
        <p> You can add more custom fields by clicking <span class="cursor-pointer text-primary"
            [routerLink]="prefixUrl+'/organization_setting/settings/work-order/custom-field'"> Here</span> </p>
      </ng-container>
    </div>
  </ng-container>
</div>