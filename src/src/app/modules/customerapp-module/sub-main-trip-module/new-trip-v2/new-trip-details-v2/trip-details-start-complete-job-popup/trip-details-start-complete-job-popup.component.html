<div class="rounded-3 layout-bg ">

    <div class="gb-popup-header">
        {{isFinishTrip ? 'End': 'Start'}} Job
    </div>

    <form  [formGroup]="startEndForm" style="max-height: calc(100vh - 250px);" class="mx-0 left--section overflow-auto">
        <div class="p-3 pb-0" *ngIf="startEndForm.controls.error_message.value || startEndForm.controls.error_message_hour.value">
        <div class="alert alert-warning" *ngIf="startEndForm.controls.error_message.value">
            {{startEndForm.controls.error_message.value}} 
           </div>
           <div class="alert alert-warning" *ngIf="startEndForm.controls.error_message_hour.value">
             {{startEndForm.controls.error_message_hour.value}}
           </div>
        </div>
        <div class="row mx-0 px-4 pt-4">
            <div class="input-wrap error error--type-1 col-lg-3 mb-2">
                <label for=""> START DATE & TIME</label>
                <app-date-and-time-picker [control]="startEndForm.controls.start_date" (dateTimeSelectedChange)="dateChange('start_date','start_kms','start_hour')"></app-date-and-time-picker>
            </div>
            <div class="col-lg-3 input-wrap mb-2">
                <label for=""> START ODOMETER READING</label>
                <input (change)="onKmsChange('start_date','start_kms')" type="text" positiveDigitNumber formControlName="start_kms" class="input--bd no-style" />
    
            </div>
            <div class="col-lg-3 input-wrap mb-2">
                <label for=""> START ODOMETER HOURS</label>
                <input (change)="onHourChange('start_date','start_hour')" type="text" positiveDigitNumber  formControlName="start_hour" class="input--bd no-style" />
    
            </div>
    
    
    
        </div>
        <div class="row mx-0 px-4 pt-4" *ngIf="isFinishTrip">
            <div class="input-wrap error error--type-1 col-lg-3 mb-2"  [ngClass]="addErrorClass(startEndForm.controls.end_date)">
                <label for=""> END DATE & TIME</label>
                  <app-date-and-time-picker [control]="startEndForm.controls.end_date" [min]="startEndForm.controls.start_date.value"  (dateTimeSelectedChange)="dateChange('end_date','end_kms','end_hour')"></app-date-and-time-picker>
            </div>
            <div class="col-lg-3 input-wrap mb-2 error" [ngClass]="addErrorClass(startEndForm.controls.end_kms)">
                <label for=""> END ODOMETER READING</label>
                <input (change)="onKmsChange('end_date','end_kms')" type="text" positiveDigitNumber formControlName="end_kms" class="input--bd no-style" />
                <app-error [controlName]="startEndForm.controls.end_kms"></app-error>
            </div>
            <div class="col-lg-3 input-wrap mb-2 error" [ngClass]="addErrorClass(startEndForm.controls.end_hour)">
                <label for=""> END ODOMETER HOURS</label>
                <input (change)="onHourChange('end_date','end_hour')" type="text" positiveDigitNumber  formControlName="end_hour" class="input--bd no-style" />
                <app-error [controlName]="startEndForm.controls.end_hour"></app-error>
            </div>
    
    
    
        </div>
        <ng-container *ngIf="startEndForm.get('checklist').value?.length">
            <div class="trip-task-tab border-bottom">
                <span>Job Task</span>
                <app-tool-tip class="tool-tip-position" [totalSlides]="tripTaskToolTip.content.length"
                position="right" [toolTipContent]="tripTaskToolTip"></app-tool-tip>
            </div>
            <app-add-edit-view-trip-task [isMandatory]="isFinishTrip" [destinationIndex]="1" [markForTouched]="markForTouched"
                [tripTaskList]="startEndForm.get('checklist').value" (tripTaskData)="tripTaskData($event)"></app-add-edit-view-trip-task>
        </ng-container>
    </form>
    <div class="d-flex justify-content-between align-items-center p-4 pt-2  pt-0">
        <button class="btn btn--sm" (click)="close()">Cancel</button>
        <button class="btn btn--primary btn--sm" (click)="openValidationPopup()">Save</button>
    </div>



    

</div>
