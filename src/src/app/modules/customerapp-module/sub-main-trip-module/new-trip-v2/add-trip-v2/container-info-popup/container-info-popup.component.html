<div>
    <div class="alert alert-danger" role="alert" *ngIf="apiError">
        {{apiError}}
      </div>
      <div class="bordered-table-wrap mx-2 mb-2 ">
      <div class="bordered-table " [formGroup]="containerInfoForm" cdkScrollable>
        <table>
          <thead>
            <tr>
                <th width=5%>
                    <label for="check-trip-all" class="check-box">
                      <input type="checkbox" id="check-trip-all" formControlName="selectedAll"
                        (change)="selectAllContainers()">
                      <span class="check-mark"></span>
                    </label>
                  </th>
                <ng-container  *ngFor="let header of headerList;let i=index" >
                   <th *ngIf="i<=8" [ngClass]="{'sticky-left':i==0,'sticky-right':i==8}">{{header}}</th>
                </ng-container>
            </tr>
          </thead>
          <tbody *ngIf="containerInfoForm.controls.salesOrderContainersDetailsList['controls'].length==0">
            <tr class="border-0">
              <td colspan="30" class="bg-white border-bottom-0">
                <div class="no-list-data-wrap">
                  <figure>
                    <img src="assets/img/no-content.png" alt="" />
                  </figure>
                  <h5 class="mt-3 primary-brand-text">No data found!</h5>
                </div>
              </td>
            </tr>
          </tbody>
          <tbody formArrayName="salesOrderContainersDetailsList">
            <tr *ngFor="let group of containerInfoForm.controls.salesOrderContainersDetailsList['controls']; let i = index" [formGroupName]="i">
                <td class="table-checkbox">
                    <label for="check-container-{{i}}" class="check-box">
                        <input type="checkbox" id="check-container-{{i}}" formControlName="containerSelected" (change)="containerSelectionChecked()">
                        <span class="check-mark"></span>
                    </label>
                </td>
              <ng-container *ngFor="let item of structureList;let j=index">

                <td *ngIf="j<=8" [ngClass]="{'sticky-left':j==0,'sticky-right':j==8}">
                  <ng-container *ngIf="item?.field_type === 'string'" >  
                    <input *ngIf="item?.id != 'status'" (change)="editContainerRowData(i)" [formControlName]="item.id" type="text" placeholder="Enter" />
                     <!-- <ng-container *ngIf="item?.id == 'status'">
                      <div class="d-flex justify-content-between align-items-center">
                        <p *ngIf="item?.id == 'status'"  >{{group.controls.status.value}}  </p>
                        <button class="gb-icon-btn ms-3" [matMenuTriggerFor]="rowOptions" matRipple (click)="selectedOrder=i">
                          <span class="material-icons">more_vert</span>
                        </button>
                      </div>
                     </ng-container> -->
                  </ng-container >
      
                  <ng-container *ngIf="item?.field_type === 'decimal'">
                    <ng-container *ngIf="item?.id=='gross_weight'">
                      <div class="d-flex align-items-center">
                      <input (change)="editContainerRowData(i)"  [formControlName]="item.id" placeholder="1234"  type="number" />
                      <button  *ngIf="group['controls'][item.id].value" (click)="cloumnClone(item.id,i)" class="clone-column" [matTooltip]="'Clone columns below'"  matTooltipClass="mat-normal-tooltip">
                        <span class="material-icons">content_copy</span>
                      </button>
                    </div>
                    </ng-container>
                    <ng-container  *ngIf="item?.id!='gross_weight'">
                      <input (change)="editContainerRowData(i)"  [formControlName]="item.id" placeholder="1234"  type="number" />
                    </ng-container>
                  </ng-container>
                  <!-- <ng-container *ngIf="item?.field_type === 'location_dropdown'">
                    <div style="min-width: 300px;" class="app-location position-relative">
                     <app-location-v2 [isFromToInvalid]="isFromToInvalid" [isnameRequired]="false" (placeDetails)="locationSelected($event, i,item.id)"
                     [editData]="group['controls'][item.id].value"></app-location-v2>
                    </div>
                  </ng-container> -->
                  <ng-container *ngIf="item?.field_type === 'datetime'">
                    <div class="date-time-input-wrap">
                    <app-date-and-time-picker (dateTimeSelected)="dateTimeSelected($event,i)" [control]="group['controls'][item.id]"></app-date-and-time-picker>
                  </div>
                  </ng-container>
                  <ng-container *ngIf="item?.field_type === 'date'">
                    <div class="date-input">
                    <mat-form-field>
                      <input matInput [matDatepicker]="date" 
                        [formControlName]="item.id" placeholder="DD/MM/YYYY" (focus)="date.open()" readonly (dateChange)="editContainerRowData(i)">
                      <mat-datepicker-toggle matSuffix [for]="date"></mat-datepicker-toggle>
                      <mat-datepicker #date></mat-datepicker>
                    </mat-form-field>
                  </div>
                  </ng-container>
                  <ng-container *ngIf="item?.field_type === 'container_type_dropdown'">
                    <div class="d-flex align-items-center" >
                    <material-dropdown [searchable]="true"  [addable]="false" class="dropDownWidth" [selectedOption]="initialValues.containerType[i]">
                    <select #customSelect [formControlName]="item.id" class="no-style select--modify" (change)="editContainerRowData(i)">
                      <option *ngFor="let option of containerTypeList" value="{{ option.id }}">
                        {{ option?.label }}
                      </option>
                    </select>
                  </material-dropdown>
                  <button  *ngIf="group['controls'][item.id].value" (click)="cloumnClone(item.id,i)" [matTooltip]="'Clone columns below'"  matTooltipClass="mat-normal-tooltip" class="clone-column">
                    <span class="material-icons">content_copy</span>
                  </button>
                 
                </div>
                  </ng-container>
      
                  <ng-container *ngIf="item?.field_type === 'container_dropdown'">
                    <div class="d-flex align-items-center" >
      
                    <material-dropdown [searchable]="true" [addBlank]="true"  [addable]="false" class="dropDownWidth" [selectedOption]="initialValues.containerName[i]">
                    <select #customSelect [formControlName]="item.id" class="no-style select--modify" (change)="onContainerNameSelection(i)">
                      <option *ngFor="let option of containerList" value="{{ option.id }}">
                        {{ option?.name }}
                      </option>
                    </select>
                  </material-dropdown>
                  <button  *ngIf="group['controls'][item.id].value" [matTooltip]="'Clone columns below'"  matTooltipClass="mat-normal-tooltip" (click)="cloumnClone(item.id,i)" class="clone-column">
                    <span class="material-icons">content_copy</span>
                  </button>
                </div>
                  </ng-container>
      
                  <ng-container *ngIf="item?.field_type === 'handling_type_dropdown'">
                    <div class="d-flex align-items-center">
                      <material-dropdown [searchable]="true"   class="dropDownWidth" [selectedOption]="initialValues.handlingType[i]">
                        <select #customSelect [formControlName]="item.id" class="no-style select--modify" (change)="editContainerRowData(i)">
                          <option *ngFor="let option of containerHandlingOptions" value="{{ option.value }}">
                            {{ option?.label }}
                          </option>
                        </select>
                      </material-dropdown>
                      <button  *ngIf="group['controls'][item.id].value" (click)="cloumnClone(item.id,i)" class="clone-column" [matTooltip]="'Clone columns below'"  matTooltipClass="mat-normal-tooltip">
                        <span class="material-icons">content_copy</span>
                      </button>
                    </div>
                  </ng-container> 
                  <ng-container *ngIf="item?.field_type === 'container_size_dropdown'">
                    <div class="d-flex align-items-center">
                      <material-dropdown [searchable]="true" class="dropDownWidth" [selectedOption]="initialValues.containerSize[i]">
                        <select #customSelect [formControlName]="item.id" class="no-style select--modify" (change)="editContainerRowData(i)">
                          <option *ngFor="let option of sizeOptions" value="{{ option.value}}">
                            {{ option?.label }}
                          </option>
                        </select>
                      </material-dropdown>
      
                      <button   *ngIf="group['controls'][item.id].value<2" (click)="cloumnClone(item.id,i)" class="clone-column" [matTooltip]="'Clone columns below'"  matTooltipClass="mat-normal-tooltip">
                        <span class="material-icons">content_copy</span>
                      </button>
                      
                    </div>
                    
                  </ng-container> 
                  <!-- <ng-container *ngIf="item.field_type === 'duration'" formGroupName="{{item.id}}" >
                    <div class="halt-time-wrap d-flex align-items-center">
                    <div class="time-input-field">
                      <input formControlName="days" positiveDigitNumber type="text"  placeholder="Days" (change)="editContainerRowData(i)"/>
                      <span class="time-input-label">Days</span>
                    </div>
                    <span class="mx-1 fw-semibold">:</span>
                    <div class="time-input-field">
                      <input formControlName="hours" positiveDigitNumber  [max]="23" placeholder="Hours" type="text" (change)="editContainerRowData(i)" />
                      <span class="time-input-label">Hours</span>
                    </div>
                    <span class="mx-1 fw-semibold">:</span>
                    <div class="time-input-field">
                      <input formControlName="minutes"  positiveDigitNumber [max]="59"  placeholder="Minutes" type="text" (change)="editContainerRowData(i)" />
                      <span class="time-input-label">Minutes</span>
                    </div>
                  </div>
                    
                  </ng-container> -->
                </td>
              </ng-container>
          </tr>  
          </tbody>
        </table>
      </div>
      <div class="d-flex justify-content-space-between mt-4">
        <button class="btn w-auto " (click)="cancel()">Cancel</button>
        <button class="btn btn--primary w-auto" (click)="save()">Save</button>
      </div>
      </div>
      
      
      <!-- <mat-menu #addJobMenu="matMenu">
        <button mat-menu-item>
          <mat-icon class=" me-2 def-color">add</mat-icon>
          <span class="def-color">Add Pullout Job</span>
        </button>
        <button mat-menu-item >
          <mat-icon class=" me-2 def-color">add</mat-icon>
          <span class="def-color">Add Deposit Job</span>
        </button>
        <button mat-menu-item>
          <mat-icon class=" me-2 def-color">add</mat-icon>
          <span class="def-color">Add Single Job</span>
        </button>
      </mat-menu> -->
      
      <!-- <mat-menu #rowOptions="matMenu">
        <button mat-menu-item (click)="deleteContainer()">
          <mat-icon class=" me-2 def-color">delete</mat-icon>
          <span class="def-color">Delete</span>
        </button>
        <button mat-menu-item (click)="cloneRowContainerData()"> 
          <mat-icon class=" me-2 def-color">content_copy</mat-icon>
          <span class="def-color">Clone</span>
        </button>
        <button mat-menu-item (click)="removeContainerRowData()">
          <mat-icon class=" me-2 def-color">close</mat-icon>
          <span class="def-color">Remove</span>
        </button>
        <button mat-menu-item (click)="addNewContainerRow()">
          <mat-icon class=" me-2 def-color">add</mat-icon>
          <span class="def-color">Add</span>
        </button>
      </mat-menu> -->
      
</div>