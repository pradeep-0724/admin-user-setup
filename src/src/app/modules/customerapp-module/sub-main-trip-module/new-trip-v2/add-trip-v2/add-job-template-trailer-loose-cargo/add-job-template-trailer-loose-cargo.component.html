<form [formGroup]="trailerForm">
    <div >
      <div class="px-4">
        <div class="row tabIndexActiveFields mx-0">
          <div class="col-xl-3 col-lg-3 col-md-3 col-6 route-input-box" [ngClass]="{'disabled': officeStatus>0}">
            <div class="input-wrap error dropdownArrow" [ngClass]="addErrorClass(trailerForm.controls.route_code)">
              <label for="" class="input">Route</label>
              <app-tool-tip class="tool-tip-position route-tool-tip-position" [totalSlides]="routeToolTip.content.length"
                position="right" [toolTipContent]="routeToolTip"></app-tool-tip>
              <material-dropdown [searchable]="true" [addable]="false" [disabled]="officeStatus>0" [selectedOption]="initialDetails.route_code">
                <select #customSelect formControlName="route_code" class="no-style select--modify"
                  (change)="routeSelected()">
                  <option *ngFor="let option of routeCodeList" value="{{ option?.name }}">
                    {{ option?.name }}
                  </option>
                </select>
              </material-dropdown>
              <app-error [controlName]="trailerForm.controls.route_code"></app-error>
            </div>
          </div>
        </div>
      </div>
      <app-multiple-destination [disabledIndex]="officeStatus" (dateTimeChanged)="dateTimeChanged($event)" (locationSelectedEmitter)="locationSelected($event)" [ismultipleDestinationFormValid]="ismultipleDestinationFormValid" [parentForm]="trailerForm" [contactPersonList]="contactPersonList"
        [ismultipleDestinationFormValid]="ismultipleDestinationFormValid" [routeId]="routeId"
        [routeDestinations]="routeDestinations" [customerId]="customerId" [routeId]="routeId"></app-multiple-destination>
      <div class="cdc-tab-wrapper">
        <app-tool-tip class="custom-field-tooltip" [totalSlides]="customFieldToolTip.content.length" position="right"
          [toolTipContent]="customFieldToolTip"></app-tool-tip>
        <mat-tab-group mat-stretch-tabs="false" class="mat-group" animationDuration="0ms" mat-align-tabs="start">
          <mat-tab>
            <ng-template mat-tab-label>
              <span [ngClass]="{ taberror:isClientFieldTabError }"> Freight Details</span>
            </ng-template>
            <app-generic-freight-material-section  [disableBilling]="isDisableBillingTypes"  [showRateAndUnitsFields]="false"  [showTax]="false"  [editDetails]="materialFreightEditDetails"  (materailsFormValue)="materailsFormValue($event)" (billingTypeChanged)="billingTypeChanged($event)"
                [parentForm]="trailerForm"  [isSubFormValid]="isSubFormValid">

                <div id="market-vehicle-cost" *ngIf="parentForm.get('is_transporter').value">
                  <p class="fw-semibold pb-3 border-bottom my-4 fs-6">Market Vehicle Freight</p>
                  <app-billing-types [isLooseCargo]="true" [isDisableBillingTypes]="isDisableBillingTypes"  [showUnitsAndRateFields]="false"  [billingFrieightChanged]="billingFrieightChanged"  [isAllMandatory]="true" [defaultBillingType]="0" [billingTypeList]="billingTypeList" [parentForm]="trailerForm" [workOrderClientFrightData]="workOrderVehicleFrightData" formType="vehicle_freights" [isMandatory] = "false"
              [isFormValid]="isFormValidvehicleFreight"></app-billing-types>

                </div>
              </app-generic-freight-material-section>
          </mat-tab>
          <mat-tab *ngIf="!parentForm.get('is_transporter').value">
            <ng-template mat-tab-label>
              <span [ngClass]="{ taberror: isDriverAllowanceTabError }">Driver Commission</span>
            </ng-template>
            <app-driver-allowance-v2 [isPaidByDriver]="isPaidByDriver" [driverId]="driverId" [driverAllowanceEdit]="driverAllowanceEdit" [parentForm]="trailerForm"
              [isFormValid]="isFormValidDriverAllowanceField"></app-driver-allowance-v2>
          </mat-tab>
  
          <mat-tab>
            <ng-template mat-tab-label>
              <span [ngClass]="{ taberror: iscustomFieldTabError }">Custom Field</span>
  
            </ng-template>
            <app-custom-field [parentForm]="trailerForm" [editData]="customFieldData" [isFormValid]="isFormValidCustomField"></app-custom-field>
          </mat-tab>
          <mat-tab>
            <ng-template mat-tab-label>
              <span>Job Documents</span>
  
            </ng-template>
            <div class="d-flex p-4 gap-3 flex-wrap">
            <file-uploader-v2 (onFileUploaded)="fileUploader($event)" fileName="Document Unknown" [uploaderId]="'1234'"
              [isShowOnlyUpload]="false"></file-uploader-v2>
            <app-file-delete-view [showInlineEdit]="true" [editedFileName]="editedFileName" [fileData]="document"
              *ngFor="let document of  trailerForm.get('documents').value"
              (fileDeleted)="fileDeleted($event)"></app-file-delete-view>
            </div>
          </mat-tab>
        </mat-tab-group>
      </div>
  
    </div>
  </form>