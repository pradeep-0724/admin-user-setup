<div class="form-layout__card formResponsiveTable tabIndexActive">
  <div action=""  [formGroup]="partyAdvanceForm">
      <div>
      <div
        class="table-wrapper table--bd table--nobg table-wrapper--type1 table-wrapper--type2 tcol-6 dropDownOverflow">
        <table class="table-container" formArrayName="advance_array">
          <thead>
            <tr class="desktop_th">
              <th>Advance Amount</th>
              <th>Bank/Cash Account</th>
              <th *ngIf="!isTripCode">Advance Date</th>
              <th></th>
            </tr>
          </thead>
          <tbody *ngFor="let item of partyAdvanceForm['controls'].advance_array['controls']; let i = index;"
          [formGroupName]="i">
          <tr class="mobile-flex">
              <td class="max-wd-120 tabIndexActive">
                <h5 class="th_h5_mobile"  >Advance Amount</h5>
                <div>
                  <input   [ngClass]="{'showInvalid':item.controls.amount.invalid&&item.controls.amount.touched}"  positiveThreeDigitDecimalNumber type="text" class="no-style input--bd" placeholder="123456" value="" (change)="onAmountChange(item)"  formControlName="amount">
                </div>
              </td>

              <td class="max-wd-120 tabIndexActiveFields">
                <h5 class="th_h5_mobile"  >Bank/Cash Account</h5>
                <div>
                  <material-dropdown [searchable]="true" [addable]="false" class="dropDownWidth" [addBlank]="false"
                  [addErrorClass]="addErrorClass(item.controls.account)"
                                [selectedOption]="initialAccount[i]">
                                <select #customSelect formControlName="account" class="no-style select--modify" (change)="onAmountChange(item)">
                                    <option *ngFor="let option of advanceClientAccountList" value="{{ option?.id }}">
                                        {{ option?.name }}
                                    </option>
                                </select>
                    </material-dropdown>
                </div>
              </td>


              <td class="table-datepicker max-wd-140 max-wd-120" *ngIf="!isTripCode">
                <h5 class="th_h5_mobile"  >Advance Date</h5>
                <mat-form-field>
                  <input matInput [matDatepicker]="transactionDate" (change)="onAmountChange(item)"
                         (focus)="transactionDate.open()" formControlName="date" placeholder="DD/MM/YYYY">
                  <mat-datepicker-toggle matSuffix [for]="transactionDate">
                  </mat-datepicker-toggle>
                  <mat-datepicker #transactionDate></mat-datepicker>
                </mat-form-field>
              </td>
            <td class="tabIndexActive">
              <button class="material-icons delete p-0" *ngIf="partyAdvanceForm['controls'].advance_array['controls'].length>1"
                (click)="removeItem(i)">add_circle_outline</button>
              <button class="material-icons add p-0" (click)="addMoreItem()"
                *ngIf="i === ( partyAdvanceForm['controls'].advance_array['controls'].length - 1)">add_circle_outline</button>
          </td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="table-footer-actions mg-top-20 tabIndexActive">
        <a class="clear-item" tabindex="0" (click)="clearAllClient()">Remove all</a>
      </div>
    </div>
  </div>
  </div>
