<div class="modal fade" [ngClass]="{'show':showEditPopup?.show}" id="exampleModal" tabindex="-1" role="dialog"
aria-labelledby="exampleModalLabel" aria-hidden="true">
<div class="modal-dialog modal--xls" role="document">
  <div class="modal-content">
    
      
          <div class="gb-popup-header"   [ngClass]="{active:true,invalidForm:showError}">{{selectionType}}</div>
     
    
    <div class="info-msg" >
      <p class="message-cont">Please note that any changes to the values will automatically update the corresponding jobs.</p>
    </div>
    <div *ngIf="selectedTab =='client-freights' || selectedTab =='vehicle-freights' || selectedTab =='client-vehicle-freights'">
      <app-billing-types [showUnitsAndRateFields]="showUnitsAndRateFields" [isFormValid]="isClientFrightValid" [isDisableBillingTypes]="!isDisableBillingTypes" [billingTypeList]="billingTypeList" [workOrderClientFrightData]="workOrderClientFrightData"
      (dataFromBilling)="clientBilling($event)"></app-billing-types>
    </div> 

    <div class="margin-30" *ngIf="selectedTab=='party-charge-bill'">
        <app-trip-add-to-bill [customerId]="customerId" [isZeroAmountAccepted]="isZeroAmountAccepted" *ngIf="selectedTab=='party-charge-bill'" 
        [isAddExpense]="isAddExpense" [editTripData]="showEditPopup" 
        [isFormValid]="isChargeAddToBillFormValid" [typeOfScreen]="'partyBill'" [singleEntry]='true'
        (dataFromAddToBill)="addDataFromChild($event,'charge')"
        ></app-trip-add-to-bill>
    </div>


    <div *ngIf="selectedTab=='vp-charge-reduce-bill'"  class="margin-30">
      <app-trip-reduce-to-bill [isZeroAmountAccepted]="isZeroAmountAccepted" *ngIf="selectedTab=='vp-charge-reduce-bill'" 
      [isAddExpense]="isAddExpense" [editTripData]="showEditPopup" 
      [isFormValid]="isChargeAddToBillFormValid" [isFormValid]="isVehicleReduceToBillFormValid" 
      [typeOfScreen]="'vpReduceBill'" [singleEntry]='true'  [customerId]="customerId" 
      (dataFromReduceBill)="addDataFromChild($event,'charge')"
      ></app-trip-reduce-to-bill>
    </div>

    <div class="margin-30"  *ngIf="selectedTab=='party-charge-reduce-bill'">
      <app-trip-reduce-to-bill  [customerId]="customerId"  [isZeroAmountAccepted]="isZeroAmountAccepted" *ngIf="selectedTab=='party-charge-reduce-bill'" 
      [isFormValid]="isChargeReduceToBillFormValid" [editTripData]="showEditPopup" [typeOfScreen]="'partyReduceBill'" [singleEntry]='true'
      (dataFromReduceBill)="addDataFromChild($event,'charge')"
      ></app-trip-reduce-to-bill>
    </div>

    <div class="margin-30" *ngIf="selectedTab=='vp-charge-bill'" >
      <app-trip-add-to-bill  [customerId]="customerId" [isZeroAmountAccepted]="isZeroAmountAccepted" *ngIf="selectedTab=='vp-charge-bill'" [isFormValid]="isVehicleAddToBillFormValid" 
      [typeOfScreen]="'vpBill'" [editTripData]="showEditPopup" [singleEntry]='true'
      (dataFromAddToBill)="addDataFromChild($event,'charge')"
      ></app-trip-add-to-bill>
    </div>

    <div *ngIf="selectedTab=='other-expenses'" class="margin-30">
      <app-trip-other-expense *ngIf="selectedTab=='other-expenses'"
      [accountList]="accountList" [singleEntry]='true'
      [isDriverSelected]="isDriver"
      [expenseAccountList]="expenseAccountList"
      [isFormValid]="isOtherExpenseFormValid"
      [expenseTypeList]="expenseTypeList" (dataFromTripOthers)="addDataFromChild($event,'otherExpense')"></app-trip-other-expense>
    </div>

    <div  *ngIf="selectedTab == 'fuel-advance'" class="margin-30">
      <app-party-advance-fuel [isFormValid]="isPartyAdvanceFuelFormValid" *ngIf="selectedTab == 'fuel-advance'" (dataFromPartyAdvance)="addDataFromChild($event)"></app-party-advance-fuel>
    </div>

    <div class="row mx-3 my-2">
      <app-party-advance-driver *ngIf="selectedTab=='driver-advance'" (dataFromDriverAdvance)="addDataFromChild($event)"></app-party-advance-driver>
    </div>

    <div class="margin-30"  *ngIf="selectedTab=='fuel-bill'" >
      <app-self-fuel [isDriverSelected]="isDriver" [partyListVendor]="partyListVendor" [isFormValid]="isSelfFuelValid" (dataFormSelfFuel)="addDataFromChild($event,'selfFuel')"
      [advanceClientAccountList]="advanceClientAccountList" [singleEntry]="isSingleEntry"></app-self-fuel>
    </div>

    <div *ngIf="selectedTab == 'party-advance'" class="margin-30" >
      <app-party-advance [isFormValid]="isPartyAdvanceFormValid" [advanceClientAccountList]="advanceClientAccountList" (dataFromAdvance)="addDataFromChild($event)" [typeOfScreen]="'partyAdvance'"></app-party-advance>
    </div>

    <div *ngIf="selectedTab == 'vp-advance'" class="margin-30">
       <app-party-advance [isFormValid]="isVehicleAdvanceFormValid" [advanceClientAccountList]="advanceClientAccountList" (dataFromAdvance)="addDataFromChild($event)"></app-party-advance>
    </div>

    <div *ngIf="selectedTab == 'driver-allowance'" class="margin-30">
      <app-self-driver
       [tripEmployeeTypeList]="tripEmployeeTypeList"
       [driverList]="driverList"
       [helperList]="helperList"
       [accountList]="accountList"
       [isDriverSelected]="isTransporter?false:isDriver"
       [isFormValid]="isSelfDriverFormValid"
       [tripstartDate]="showEditPopup?.data.start_date" (dataFromSelfDriver)="addDataFromChild($event,'selfDriver')"
       ></app-self-driver>
    </div>

    <div *ngIf="selectedTab == 'upload-pod'" class="margin-30">
      <app-upload-pod [tripDateData]="showEditPopup.data" (dataFromPod)="addDataFromChild($event)"></app-upload-pod>
    </div>

    <div class="d-flex  px-4 pb-3 justify-content-between align-items-center">
      
        <button class="btn btn--sm"  type="submit" (click)="onClickCancel()">Cancel</button>
     
      
        <button class="btn btn--primary btn--sm"  type="submit" (click)="onClickSave()">Save</button>
      
    </div>
  </div>
</div>
</div>
<div *ngIf="showEditPopup?.show" class="modal-backdrop fade show"></div>
<alert-popup [inputData]="popupWorkOrderInputData" (outputData)="confirmWorkOrderButton($event)"></alert-popup>
