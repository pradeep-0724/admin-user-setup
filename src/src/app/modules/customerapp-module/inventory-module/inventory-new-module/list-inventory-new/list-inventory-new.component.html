
<div class="right-section__header">
    <h1 class="heading col-8">Inventory List</h1>
    <div class="col-4  text-end d-flex align-items-center justify-content-end tabIndexActive">
        <button class="add-button btn--rounded mx-2" *ngxPermissionsOnly="[inventoryNew[0]]" [routerLink]="[prefixUrl+'/inventory/add/inventory-new']"
         routerLinkActive="router-link-active">Add Inventory</button>
    </div>
</div>
<app-list-widget
[isDetailsEnable]="true"
[isSearchEnable]="true"
[isShowingEnable]="true"
[isFilterEnable]="true"
(searchValueEmitter)="searchFilter($event)"
(showItemByEmitter)="filterListBy($event)"
(openDetailsEmitter)="openListDetailsData($event)"
(filteredDataEmitter) ="filteredData($event)"
[openListDetails]="openListDetails"
[apiError]="apiError"
[isMobile]="isMobile"
[filterOptions]="options"
[filterDataList]="allData">
  <div id="tableList">
    <div class="table-wrapper-list" [ngClass]="{'table-wrapper-init':!routeToDetail , 'table-wrapper-auto':routeToDetail}" id="table-height">
      <table class="table-container" matSort (matSortChange)="sortData($event)">
          <thead>
              <tr>
                  <th mat-sort-header="bill_date">Bill Date</th>
                  <th mat-sort-header="bill_number">Bill Number</th>
                  <th mat-sort-header="vendor">Vendor Name</th>
                  <th mat-sort-header="po">PO No</th>
                  <th mat-sort-header="total">Amount ({{ currency_type?.symbol}}) </th>
                  <th mat-sort-header="amount_due">Due Amount ({{ currency_type?.symbol}})</th>
                  <th mat-sort-header="payment_status">Status</th>
                  <th></th>
              </tr>
          </thead>
          <tbody>
              <tr *ngIf="(otherData | inventoryListActivityFilter:search)?.length == 0">
                  <td colspan="10" style="background-color: #fff">
                      <div class="no-content-wrapper">
                          <figure class="no-content-pic">
                              <img src="assets/img/no-content.png" alt="">
                          </figure>
                          <div class="no-content-txt">
                              <h5 class="heading">No data found!</h5>
                          </div>
                      </div>
                  </td>
              </tr>
              <tr
                  *ngFor="let data of sortedData | inventoryListActivityFilter: search | paginate: { itemsPerPage: filter_by, currentPage: p }; let i = index;" [ngClass]="{'viewActive':(data.id==selectedId)&&routeToDetail }">
                  <td>{{ dateChange(data.bill_date) }}</td>
                  <td class="link" (click)="createQueryParems(data.id)">{{ data.bill_number }}</td>
                  <td><a target="_blank" class="link" [routerLink]="[prefixUrl+'/onboarding/party/details/vendor/'+data.vendor.id]">{{ data.vendor.display_name}}</a></td>
                  <td>{{ data.po ?  data.po?.po_number  : '-'}}</td>
                  <td class="rupee-symbol rupee-symbol--sm">{{ data.total_amount }}</td>
                  <td class="rupee-symbol rupee-symbol--sm">{{ data.amount_due }}</td>

                  <td>{{data?.payment_status}}</td>
                  <td class="table-action" *ngxPermissionsOnly="[inventoryNew[1],inventoryNew[2]]">
                      <i class="material-icons more-icon" (click)="optionsList($event, 'list_'+data.id)">more_vert</i>
                      <ul class="more-actions__menu table-popup" [ngClass]="{show: showOptions === 'list_'+data.id}">
                          <li class="more-actions__item" *ngxPermissionsOnly="[inventoryNew[1]]"
                              [routerLink]="[prefixUrl+'/inventory/edit/inventory-new/', data.id]"><i
                                  class="material-icons">edit</i>Edit</li>
                          <ng-container *ngxPermissionsOnly="[inventoryNew[2]]" >
                            <li *ngIf="!data.disabled" class="more-actions__item" (click)="popupFunction(data.id, i)"><i
                                    class="material-icons">delete</i>Delete</li>
                          </ng-container>
                      </ul>
                  </td>
              </tr>
          </tbody>
      </table>
  </div>
  <div class="table-page-no">
      <pagination-controls previousLabel='' nextLabel="" directionLinks="true" class=" my-pagination"
          (pageChange)="p = $event" (pageBoundsCorrection)="p=$event">
      </pagination-controls>
  </div>
  </div>

  <div id="listWebDetails">
    <app-details-inventory *ngIf="routeToDetail && !isMobile"  [inventoryId]="inventoryId" ></app-details-inventory>
  </div>
  <div id="listMobileDetails">
    <app-details-inventory *ngIf="routeToDetail && isMobile"  [inventoryId]="inventoryId" ></app-details-inventory>
  </div>
</app-list-widget>
<alert-popup [inputData]="popupInputData" (outputData)="confirmButton($event)"></alert-popup>
