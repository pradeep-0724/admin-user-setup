<div class="def-color add-screen-wrap" >
    <div class="px-4 py-3 calc-height">
        <h6 class="fs-5">{{zoneId ? 'Edit' :'Add'}} Zone &nbsp;</h6>
    </div>
    <div class="alert-msg" *ngIf="apiError">
        <span class="icon-wrap"></span>
        <p class="message-cont">{{ apiError }}</p>
    </div>
    <div class="shadow-inset-top-lg">

        
            <form [formGroup]="placeForm" >
                <div class="row px-3 pt-4 pb-2 mx-0 calc-height">
                    <div class="col-md-3">
                        <div class="input-wrap error " [ngClass]="addErrorClass(placeForm.controls.name)">
                            <label for=""  class="input input--required"> Zone Name</label>
                            <input appUpperCase type="text"  class="no-style input--bd" placeholder="123456" value="" formControlName="name" (change)="zonenameChange()">
                            <app-error [controlName]="placeForm.controls.name"></app-error>
                            <p class="error-reg" *ngIf="uniqueZoneErr">{{uniqueZoneErr}}</p>
                          </div>
                    </div>
                    <div class="col-md-3 ">
                        <div class="input-wrap max-height-150 error"
                            [ngClass]="addErrorClass(placeForm['controls'].country)">
                            <label for="" class="input--required">Country</label>
                            <material-dropdown [searchable]="true" [addable]="false" class="dropDownWidth"
                                [selectedOption]="{label:placeForm['controls'].country.value,value:''}">
                                <select #customSelect formControlName="country" class="no-style  select--modify"
                                    (change)="billingCountryChange()">
                                    <option *ngFor="let option of country" value="{{ option?.name }}">
                                        {{ option?.name }}
                                    </option>
                                </select>
                            </material-dropdown>
                            <app-error [controlName]="placeForm['controls'].country">
                            </app-error>
                        </div>
                    </div>
                    <div class="col-xl-3 col-lg-4 col-sm-6">
                        <div class="input-wrap max-height-150 error"
                            [ngClass]="addErrorClass(placeForm['controls'].state)">
                            <label for="" class="input--required">State</label>
                            <material-dropdown [searchable]="true" [addable]="false" class="dropDownWidth"
                            [selectedOption]="{label:placeForm['controls'].state.value,value:''}">
                                <select #customSelect formControlName="state" class="no-style select--modify">
                                    <option *ngFor="let option of statesBilling" value="{{ option?.name }}">
                                        {{ option?.name }}
                                    </option>
                                </select>
                            </material-dropdown>
                            <app-error [controlName]="placeForm['controls'].state">
                            </app-error>
                        </div>
                    </div>
                    <div class="col-xl-3 col-lg-3 col-md-3 col-6">
                        <div class="input-wrap clearfix">
                          <label for="" class="input">Location</label>
                          <div>
                            <material-dropdown [searchable]="true" [selectedOption]="emptyLocation" [addable]="true"
                            [postApiUrl]="areaApi"
                            [params]="areaParams"
                            (postApiResponse)="getNewArea($event,placeForm)"
                            (addValueToList)="addNewArea($event)">
                              <select #customSelect formControlName="location_selection" class="no-style select--modify" (change)="locationSelected(placeForm)">
                                <option *ngFor="let option of locationList" value="{{ option?.id }}">
                                  {{ option?.label }}
                                </option>
                              </select>
                            </material-dropdown>
                          </div>
                        </div>
                      </div>
                </div>
                
                
            </form>

            <div class="fake-tab-bar calc-height"><span>Selected Location</span></div>
            <div class="row mx-0 ">
                <div class="col-md-5 px-0">
                    <div *ngIf="placeForm.get('areas').value.length==0" class="h-100 p-3 d-flex align-items-center justify-content-center flex-column no-location-selected border-end" >
                        <span class="material-icons ">
                            location_on
                            </span>
                        <p  class="mt-4 fs-6 fw-semibold">No Location Added</p>
                    </div>
                   
                          <div *ngIf="placeForm.get('areas').value.length" id="locations-table" class="custom-table-container border-end"
                             >
                            <table >
                              <thead >
                                <tr>
                                  <th class="pt-4">No.</th>
                                  <th class="pt-4">Location</th>
                                  <th class="icon-box pt-4"></th>
                                </tr>
                              </thead>
                            
                              <tbody>
                                <tr *ngFor="let location of placeForm.get('areas').value; let i= index" class="bg-white">
                                    <td >{{i+1}}</td>
                                    <td class="line-height-normal">{{location?.name}}</td>
                                    <td class="icon-box">
                                        <div  class="d-flex justify-content-center align-items-center"><button  class="gb-btn-hover" (click)="removeZone(i) "><i  class="material-icons text-danger">delete</i></button></div>
                                    </td>
                                 
                                </tr>
                              </tbody>
                            </table>
                          </div>
                </div>
                <div class="col-md-7 p-2" id="google-map">
                    <google-map height="100%" width="100%" *ngIf="zoom" [zoom]="zoom" [center]="center" >
                        <map-marker *ngFor="let markerPosition of markerPositions" [position]="markerPosition"
                            [options]="markerOptions"></map-marker>
                    </google-map>
                </div>
            </div>
        

       
        
    </div>
    
    
</div>
<div class="footer-bg p-2 px-4 custom-footer-bg d-flex justify-content-end calc-height">
    <button class="btn btn--sm me-2" (click)="cancel()" type="submit">Cancel</button>
    <button class="btn btn--primary btn--sm" (click)="submitForm()" type="submit">{{zoneId ? 'Update' :'Save'}}</button>
  </div>



