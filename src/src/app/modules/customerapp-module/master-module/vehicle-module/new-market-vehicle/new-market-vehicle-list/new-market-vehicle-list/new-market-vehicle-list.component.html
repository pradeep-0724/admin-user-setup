<div class="calc-height">
<div class="alert-msg" *ngIf="apiError">
    <p class="message-cont">{{apiError}}</p>
  </div>
<app-list-widget [tabSelectionList]="tabSelectionList" [isDateDropDown]="false" [isFilter]="true"  [isSettings]="true" [settingsUrl]="settingsUrl"
    (listWidgetData)="listWidgetData($event)" [isDropDown]="true" [buttonData]="buttonData" [isAddButton]="true" (settingsApplied)="settingsApplied($event)"
    [filterUrl]="filterUrl" [isExport]="true" (exportList)="exportList($event)">
    <div class="video-button me-3" id="custom-button-left">
        <button class="gb-video-play float-right" (click)="openGothrough()">
            <i class="bi bi-play-circle-fill"></i>
        </button>
        <app-go-through [goThroughDetais]="goThroughDetais"></app-go-through>
    </div>
</app-list-widget>
</div>

<div class="custom-table-container" id="market-vehicle-list" (scroll)="onScroll($event)">
    <table [ngClass]="{'h-100':marketVehicleList.length==0}" >

        <thead>
            <tr>
      
              <ng-container *ngFor="let heading of vehicleHeader">
                <th> {{heading}} </th>
              </ng-container>
              <th class="icon-box"></th>
            </tr>
          </thead>
          <tbody *ngIf="marketVehicleList.length == 0">
            <tr class="border-0">
              <td class="bg-white" colspan="30">
                <div class="no-list-data-wrap">
                  <figure>
                    <img src="assets/img/no-content.png" alt="">
                  </figure>
                  <h5 class="mt-3 primary-brand-text">No data found!</h5>
                </div>
              </td>
            </tr>
      
          </tbody>

        <tbody>


        <tr *ngFor="let vehicle of marketVehicleList; trackBy: trackById ;">
            <ng-container *ngFor="let item of vehicle['extras'];let i =index">
              <td class="ws-nowrap" *ngIf="item?.name !='Vehicle No' && item?.name != 'Vehicle Provider'"> {{item?.value ? item?.value : '-'}} </td>
              <ng-container *ngIf="item?.name=='Vehicle No'">
                <td>
                  <a class="custom-link"  [routerLink]="[prefixUrl+'/onboarding/vehicle/market/details/'+vehicle.id]" [queryParams]="{fromlist: 'market'}" >{{item.value}} </a>
                </td>
              </ng-container>
              <ng-container *ngIf="item?.name =='Vehicle Provider'">
                <td class="td-2l">
                  <div class="text-2l">
                  <a class="custom-link" target="_blank"  [routerLink]="[prefixUrl+'/onboarding/party/details/vendor/'+item?.value?.id]" > {{item?.value?.name ? item?.value.name : '-'}}  </a>
                </div>
                </td>
              </ng-container>
            </ng-container>
            <td class="icon-box  tabIndexActive">
                <div class="d-flex justify-content-center align-items-center" *ngxPermissionsOnly="[vehiclePer[1],vehiclePer[2]]">
                    <div class="position-relative">
                        <button class="material-icons more-icon p-0"
                            (click)="optionsList($event, 'list_'+vehicle.id)">more_vert</button>
                        <div class="more-actions__menu table-popup"
                            [ngClass]="{show: showOptions === 'list_'+vehicle.id}">
                            <ng-container *ngxPermissionsOnly="[vehiclePer[1]]">
                              <button class="more-actions__item w-100" *ngIf="!vehicle.is_archived_status"
                              [routerLink]="[prefixUrl+'/onboarding/vehicle/market/edit/'+vehicle.id]"><i
                                  class="material-icons">edit</i>Edit</button>
                            </ng-container>
                            <ng-container *ngxPermissionsOnly="[vehiclePer[2]]">
                              <button class="more-actions__item w-100" (click)="popupFunction(vehicle, i)" *ngIf="!vehicle.is_archived_status"><i
                                class="material-icons">delete</i>Mark Inactive</button>
                            </ng-container>
                         
                            <ng-container  *ngxPermissionsOnly="[vehiclePer[1]]">

                              <button class="more-actions__item w-100 py-0" *ngIf="vehicle.is_archived_status"
                              (click)="activateVehicle(vehicle)"><i class="material-icons"><span class="material-icons-outlined">autorenew
                                      </span></i>Activate</button>
                            </ng-container>
                        
                        </div>
                    </div>
                </div>

            </td>


          </tr>
        </tbody>
    </table>
</div>
<alert-popup [inputData]="popupInputData" (outputData)="confirmButton($event)"></alert-popup>