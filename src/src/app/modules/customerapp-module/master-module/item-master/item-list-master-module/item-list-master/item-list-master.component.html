<div class="calc-height">
    <div class="form-layout" id="form-height" *ngIf="apiError">
        <div class="table-header form-layout--pd">
          <div class="alert-msg">
            <span class="icon-wrap"></span>
            <p class="message-cont">{{ apiError }}</p>
          </div>
        </div>
      </div>
        
    <app-list-widget [listTitle]="'Item Master List'" [isDateDropDown]="false" [isFilter]="true" [isExport]="false"   [isSettings]="true"     [settingsUrl]="settingsUrl"
            (listWidgetData)="listWidgetData($event)" [buttonData]="buttonData" [isAddButton]="true"
            [filterUrl]="filterUrl"(settingsApplied)="settingsApplied($event)">
           
    </app-list-widget>
    </div>
        
      
      
      <div>
      
        <ng-template #actionsTemplate let-item let-index="i">
          
            <button class=" p-0 material-icons more-icon" *ngxPermissionsOnly="[itemPermissions[1],itemPermissions[2]]"
              (click)="optionsList($event, 'list_'+item.id)">more_vert</button>
            <div class="more-actions__menu table-popup" [ngClass]="{show: showOptions === 'list_'+item.id}">
              <ng-container *ngxPermissionsOnly="itemPermissions[1]">
                <button  class="more-actions__item w-100"
                  (click)="editItem(item.id)"><i class="material-icons">edit</i>Edit</button>
              </ng-container>
              <!-- <ng-container *ngxPermissionsOnly="itemPermissions[2]">
                <button  class="more-actions__item w-100"
                  (click)="popupFunction(item, i)"><i class="material-icons">delete</i>Delete</button>
              </ng-container> -->
          
            </div>
        </ng-template>
      
      
        <div class="custom-table-container ws-nowrap" (scroll)="onScroll($event)" id="item-list">
          <table [ngClass]="{'h-100':itemList.length==0}">
      
            <thead>
               <tr>
         
                 <ng-container *ngFor="let heading of itemListHeader">
                   <th> {{heading}} </th>
                 </ng-container>
                 <th class="icon-box"></th>
               </tr>
             </thead>
             <tbody *ngIf="itemList.length == 0">
               <tr class="border-0">
                 <td class="bg-white" colspan="30">
                   <div class="no-list-data-wrap">
                     <figure>
                       <img src="assets/img/no-content.png" alt="">
                     </figure>
                     <h5 class="mt-3 primary-brand-text">No data found!</h5>
                   </div>
                 </td>
               </tr>
         
             </tbody> 
           <tbody>
               <tr *ngFor="let item of itemList; trackBy: trackById ;">
                 <ng-container *ngFor="let item of item['extras'];let i =index">
                   <td class="ws-nowrap" *ngIf="item?.id!='rate' && item?.id!='purchase_unit_cost'"> {{item?.value ? item?.value : '-'}} </td>
                   <ng-container *ngIf="item?.id=='rate' || item?.id=='purchase_unit_cost'">
                     <td >
                        {{item?.value|numberFormat}}
                     </td>
                   </ng-container>
                 </ng-container>
                 <td class="icon-box  tabIndexActive"  >
                  <div class="d-flex justify-content-center align-items-center" >
                      <div class="position-relative">
                        <ng-container>
                          <ng-container >
                            <ng-container *ngTemplateOutlet="actionsTemplate; context: { $implicit: item,i }"></ng-container>
                           </ng-container>
                         
            
                        </ng-container>
                    </div>
                      </div>
                  
      
              </td>
      
      
               </tr>
           </tbody>
       </table>
      </div>
      
      
      </div>
      <alert-popup [inputData]="popupInputData" (outputData)="confirmButton($event)"></alert-popup>