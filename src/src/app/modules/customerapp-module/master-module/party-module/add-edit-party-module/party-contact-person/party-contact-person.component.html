
<div [formGroup]="partyForm">


 <div class="addable-row-table def-color m-2">
    <table >
        <thead>
            <tr>
                <th>NAME</th>
                <th>DESIGNATION</th>
                <th>Mobile NUMBER</th>
                <th>WORK NUMBER</th>
                <th>EMAIL</th>
                <th class="border-end-0 text-center">MARK AS DEFAULT</th>
                <th class="border-start-0"></th>
            </tr>
        </thead>
        <tbody formArrayName="contact">
           
            <ng-container *ngFor="let contactdetails of partyForm['controls'].contact['controls']; let i = index;"[formGroupName]="i"
            >
            <tr >
                <td>
                    <div 
                            [ngClass]="addErrorClass(contactdetails.controls.first_name)">
                            
                            <input  type="text"  placeholder="Name" value=""
                                formControlName="first_name">
                            <app-error [controlName]="contactdetails.controls.first_name" class="mt-1 error-text">
                            </app-error>
                        </div>
                </td>
                <td>
                    <div >
                       
                        <material-dropdown [searchable]="true" [selectedOption]="initialValues.designation[i]"  class="dropDownWidth"
                        [addable]="true"
                        [postApiUrl]="staticApi"
                        [params]="designationParam"
                        (postApiResponse)="getNewDesignation($event,contactdetails,i)"
                        (addValueToList)="addNewDesignation($event)">
                        <select #customSelect formControlName="designation"   class="no-style select--modify">
                          <option *ngFor="let option of designationList" value="{{ option?.label}}">
                            {{ option?.label }}
                          </option>
                        </select>
                      </material-dropdown>
                    </div>
                </td>
                <td>
                    <div >
                        <div class="d-flex align-items-center">
                            <div class="cp-phone-code-wrap">
                                <img class="flag" [src]="initialValues.contact_number_country_flag[i]"/>
                                <material-dropdown class="dropDownWidth" [selectedOption]="initialValues.contact_number_country_code[i]">
                                    <select #customSelect formControlName="contact_number_country_code" class="no-style select--modify" (change)="onCountryCodeSelection(partyForm,i)">
                                <option *ngFor="let phone_code of countryPhoneCode" [value]="phone_code">
                                    {{phone_code}}
                                </option>
                                </select>
                            </material-dropdown>
                        </div>

                        <div class=" border mx-1" style="height: 22px;"></div>
                        
                        
                            <div class="flex-grow-1"
                            [ngClass]="addErrorClass(contactdetails.get('contact_number'))">
    
                            <input type="number"  class="w-100"  placeholder="Number"
                                value="" formControlName="contact_number">
                            
                        </div>
                    </div>
                        
                        <app-error [controlName]="contactdetails.get('contact_number')" class="mt-1 error-text"></app-error>
                            <span *ngIf="contact_number_error" class="error-text mt-1">{{contact_number_error}}</span>
                    </div>

                </td>
                <td>
                    <div class="d-flex align-items-center" formGroupName="work_number"> 
                        
                            <div >
                            <input  type="text"  placeholder="Number" positiveDigitNumber value=""
                                formControlName="no">
                        </div>
                        <div class=" border mx-1" style="height: 22px;"></div>
                      
                        
                            <div >
                            <input  type="text"  placeholder="Extension" value=""
                                formControlName="ext">
                        </div>
                        
                    </div>
                </td>
                <td>
                    <div 
                            [ngClass]="addErrorClass(contactdetails.controls.email_address)">
                            
                            <input appLowerCase type="email"  placeholder="email@gmail.com" value=""
                                formControlName="email_address">
                            <app-error [controlName]="contactdetails.controls.email_address" class="pt-1 error-text"></app-error>
                        </div>
                </td>
                <td class="border-end-0">
                   <div class="d-flex justify-content-center">
                        <mat-checkbox formControlName="default_contact_person" (change)="changeinMarkasDefault(i)" color="primary"></mat-checkbox>
                    </div>
                 
                </td>
                <td class="rc-row-btn-wrap border-start-0 ">
                    <div class="d-flex justify-content-end">
                        <button  class="row-btn row-btn-delete" *ngIf="partyForm['controls'].contact['controls'].length>1" (click)="removeContactItem(i)"><span class="material-icons"> close </span></button>
                    <button class="row-btn row-btn-add" *ngIf="i === ( partyForm['controls'].contact['controls'].length - 1)" (click)="addMoreItem()" ><span class="material-icons"> add </span></button>
                </div>
                </td>
            </tr>
        
    </ng-container>

        </tbody>
    </table>
</div> 
</div>