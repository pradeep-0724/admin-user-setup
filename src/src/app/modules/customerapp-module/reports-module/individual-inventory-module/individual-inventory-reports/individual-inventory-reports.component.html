<div class="right-section__header">
    <h1 class="heading">Spare Summary</h1>
    <div class="row ms-auto me-2 header-actions">
        <div class="col-sm-10 col-md-10 col-xs-2 date">
            <input type="text" class="form-control date-range no-style date-range-style"
            [ngModelOptions]="{standalone: true}" bsDaterangepicker [(ngModel)]="selectedRange"
             (bsValueChange)="getSelectedDate($event)"
            [bsConfig]="{ rangeInputFormat: 'DD MMM YYYY', showWeekNumbers: false }">

        </div>
    </div>
  </div>


<div class="stat-report-wrap mg-top-30">
  <div class="stat-report-list stat-report-list--sm-pd stat-report-list--blue" id="blue">
          <div class="stat-report-list__item">
                  <div class="cont">
                      <label class="label">Total Inventory</label>
                      <span class="value">{{ headerData?.total_inventory}}</span>
                  </div>
                  <span class="material-icons">
                    assignment
                  </span>
              </div>
              <div class="stat-report-list__item">
                  <div class="cont">
                      <label class="label">Total Value</label>
                      <span class="value rupee-symbol">
                        {{ headerData?.total_value}}
                      </span>
                  </div>
             <img src="../../../../../../assets/img/Path.png">
              </div>
  </div>
  <div class="stat-report-list stat-report-list--sm-pd stat-report-list--pink" id="pink">
      <div class="stat-report-list__item">
          <div class="cont">
              <label class="label">Most used on</label>
              <span class="value"> {{ headerData?.most_used_on  ? headerData?.most_used_on : '-'}} </span>
          </div>
          <img src="../../../../../../assets/img/itruck.png">
      </div>
  </div>
  <div class="stat-report-list stat-report-list--sm-pd stat-report-list--orange" id="orange">
          <div class="stat-report-list__item">
              <div class="cont">
                  <label class="label">Last Purchased on</label>
                  <span class="value">{{ headerData?.last_purchased_on}}</span>
              </div>
              <img src="../../../../../../assets/img/icalender.png">
          </div>
          <div class="stat-report-list__item">
              <div class="cont">
                  <label class="label">Last Used On</label>
                  <span class="value">{{ headerData?.last_used_on}}</span>
              </div>
              <img src="../../../../../../assets/img/icalender.png">
          </div>
  </div>
</div>




<div class="mt-3">
  <div class="box-shadow">
    <!-- <div [ngClass]="{'empty-state': !allData?.length}"></div> -->

    <div class="form-layout" id="form-height">
    <div class="table-section">
        <div class="table-header">
            <div class="row">
                <div class="col-xl-4">
                    <div class="table-header__left">
                        <div class="search-options">
                         <p  class="spare-heading">Spare Usage Log</p>
                        </div>
                    </div>
                </div>
                <div class="col-xl-8">
                    <div class="table-header__right align-left-lg">
                    <div id="demo-2">
                        <input type="search" placeholder="Search..."
                        [(ngModel)]="search1">
                    </div>
                        <div class="select-wrap">
                            <span class="show-text">Showing</span>
                            <select [(ngModel)]="spareUsageLogSelectedOption" name="" class="no-style select--modify" (ngModelChange)="getSpareUsageLogDetails()">
                                <option *ngFor="let num of filter" value="{{num.value}}">{{num.key}}</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="table-wrapper-list" id="table-height">
            <table class="table-container" matSort (matSortChange)="sortUsageLogData($event)">
                <thead>
                    <tr>
                        <th >Date</th>
                        <th >Opening Count</th>
                        <th >Issued</th>
                        <th >Repaired</th>
                        <th >Purchased</th>
                        <th >Closing Balance</th>
                        <th >Est. Issue Value</th>
                        <th >Est. Purchase Value</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngIf="(spareUsageLogDetails | spareUsageLogListPipe:search1 )?.length == 0">
                        <td colspan="10" style="background-color: #fff">
                            <div class="no-content-wrapper">
                                <figure class="no-content-pic">
                                    <img src="assets/img/no-content.png" alt="">
                                </figure>
                                <div class="no-content-txt">
                                    <h5 class="heading">No data found!</h5>
                                </div>
                            </div>
                        </td>
                    </tr>
                    <tr
                        *ngFor="let data of spareUsageLogDetails | spareUsageLogListPipe:search1  ; let i = index;">
                        <td >{{ data?.date}}</td>
                        <td>{{ data?.opening?.total}}</td>
                        <td>{{ data?.issued?.total}}</td>
                        <td>{{ data?.repaired?.total}}</td>
                        <td>{{ data?.purchased?.total}}</td>
                        <td class="rupee-symbol rupee-symbol--sm">{{ data?.closing?.value}}</td>
                        <td class="rupee-symbol rupee-symbol--sm">{{ data?.issued?.value}}</td>
                        <td class="rupee-symbol rupee-symbol--sm">{{ data?.purchased?.value}}</td>

                    </tr>
                </tbody>
            </table>
        </div>
        <div class="table-page-no">
            <app-pagination-search [inputData]="spareUsageLogData" [pageNumberCount]="spareUsageLogSelectedOption" (outputData)="spareUsageLogoutputData($event)" [startDate]="startDate" [url]="spareUsageLogUrl" [endDate]="endDate"></app-pagination-search>

        </div>
    </div>
    </div>
  </div>
</div>


<div class="row mt-3">
  <div class="col-md-6">
    <div class=" box-shadow">
      <!-- <div [ngClass]="{'empty-state': !allData?.length}"></div> -->

      <div class="form-layout" id="form-height">
      <div class="table-section">
          <div class="table-header">
              <div class="row">
                  <div class="col-xl-4">
                      <div class="table-header__left">
                        <div class="search-options">
                          <p class="issue-heading">Issue Log</p>
                         </div>
                      </div>
                  </div>
                  <div class="col-xl-8">
                      <div class="table-header__right align-left-lg">
                        <div id="demo-2">
                            <input type="search" placeholder="Search..."
                            [(ngModel)]="search2">
                        </div>
                          <div class="select-wrap">
                              <span class="show-text">Showing</span>
                              <select [(ngModel)]="filter_by" name="" class="no-style select--modify">
                                  <option *ngFor="let num of filter" value="{{num.value}}">{{num.key}}</option>
                              </select>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
          <div class="table-wrapper-list" id="table-height">
              <table class="table-container" matSort>
                  <thead>
                      <tr>
                        <th >Date</th>
                        <th >Vehicle No.</th>
                        <th >Issue Count</th>
                        <th >Est. Issue Value</th>
                      </tr>
                  </thead>
                  <tbody>
                      <tr *ngIf="(issueLogDetails | issueLogListPipe :search2)?.length == 0">
                          <td colspan="10" style="background-color: #fff">
                              <div class="no-content-wrapper">
                                  <figure class="no-content-pic">
                                      <img src="assets/img/no-content.png" alt="">
                                  </figure>
                                  <div class="no-content-txt">
                                      <h5 class="heading">No data found!</h5>
                                  </div>
                              </div>
                          </td>
                      </tr>
                      <tr
                          *ngFor="let data of issueLogDetails | issueLogListPipe:search2 | paginate: { itemsPerPage: filter_by, currentPage: p } ; let i = index;">
                          <td>{{data?.date}}</td>
                          <td>{{data?.vehicle}}</td>
                          <td>{{data?.quantity}}</td>
                          <td class="rupee-symbol rupee-symbol--sm">{{data?.est_value}}</td>
                    </tr>
                  </tbody>
              </table>
          </div>
          <div class="table-page-no">
            <pagination-controls previousLabel='' nextLabel="" directionLinks="true" class="my-pagination"
            (pageChange)="p = $event" (pageBoundsCorrection)="p=$event">
        </pagination-controls>

          </div>
      </div>
      </div>
    </div>
  </div>
  <div class="col-md-6">
    <div class="box-shadow">
      <!-- <div [ngClass]="{'empty-state': !allData?.length}"></div> -->

      <div class="form-layout" id="form-height">
      <div class="table-section">
          <div class="table-header">
              <div class="row">
                  <div class="col-xl-4">
                      <div class="table-header__left">
                        <div class="search-options">
                          <p class="purchase-heading">Purchase Log</p>
                         </div>
                      </div>
                  </div>
                  <div class="col-xl-8">
                      <div class="table-header__right align-left-lg">
                        <div id="demo-2">
                            <input type="search" placeholder="Search..."
                            [(ngModel)]="search3">
                        </div>
                          <div class="select-wrap">
                              <span class="show-text">Showing</span>
                              <select [(ngModel)]="purchaseLogSelectedOption" name="" class="no-style select--modify" (ngModelChange)="getPurchaseLogDetails()">
                                  <option *ngFor="let num of filter" value="{{num.value}}">{{num.key}}</option>
                              </select>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
          <div class="table-wrapper-list" id="table-height">
              <table class="table-container" matSort (matSortChange)="sortedData($event)">
                  <thead>
                      <tr>
                        <th >Date</th>
                        <th >Vendor Name</th>
                        <th >Units</th>
                        <th >Rate</th>
                        <th >GST</th>
                        <th  >Total</th>

                      </tr>
                  </thead>
                  <tbody>
                      <tr *ngIf="(purchaseLogDetails | purchaseLogListPipe: search3 )?.length == 0">
                          <td colspan="10" style="background-color: #fff">
                              <div class="no-content-wrapper">
                                  <figure class="no-content-pic">
                                      <img src="assets/img/no-content.png" alt="">
                                  </figure>
                                  <div class="no-content-txt">
                                      <h5 class="heading">No data found!</h5>
                                  </div>
                              </div>
                          </td>
                      </tr>
                      <tr
                          *ngFor="let data of purchaseLogDetails | purchaseLogListPipe: search3 ; let i = index;">
                          <td>{{data?.date}}</td>
                          <td>{{data?.Vendor}}</td>
                          <td>{{data?.quantity}}</td>
                          <td>{{data?.rate}}</td>
                          <td class="rupee-symbol rupee-symbol--sm">{{data?.gst}}</td>
                          <td class="rupee-symbol rupee-symbol--sm">{{data?.total}}</td>
                      </tr>
                  </tbody>
              </table>
          </div>
          <div class="table-page-no">
            <app-pagination-search [inputData]="purchaseLogData" [pageNumberCount]="purchaseLogSelectedOption" (outputData)="purchaseLogoutputData($event)" [startDate]="startDate" [url]="purchaseLogUrl" [endDate]="endDate"></app-pagination-search>

          </div>
      </div>
      </div>
    </div>
  </div>
</div>
