<div class="calc-height">
  <app-list-widget [isSearch]="true" [isSettings]="true" [isDropDown]="true" [filterUrl]="filterUrl" [isFilter]="true" [tabSelectionList]="tabSelectionList"
  (settingsApplied)="settingsApplied($event)"
  [settingsUrl]="settingsUrl"
  (listWidgetData)="listWidgetData($event)"
  >
  </app-list-widget>
  <div class="container-fluid layout-bg">
    <!-- This may come in future -->
    <!-- <div class="row px-3 py-3 shadow-inset-top">
        <div class="col-12">
          <span class="live-status-toggle " (click)="isLiveStatusOpen = !isLiveStatusOpen"> <span>
              <i class="bi bi-caret-right-fill " *ngIf="!isLiveStatusOpen"></i>
              <i class="bi bi-caret-down-fill" *ngIf="isLiveStatusOpen"></i>
            </span> <span class="ms-3">Live Status</span></span>
        </div>
      </div> -->
    <!-- <div class="row px-3 def-color live-status-wrap" *ngIf="isLiveStatusOpen">
        <div class="col-lg col-md-4 col-6 ">
          <div class="trip-status-card yellow-card">
            <span class="truck-icon"><i class="bi bi-truck"></i></span>
            <div>
              <p class="fs-4 fw-semibold trips-amount">1212</p>
              <p class="fs-12px mt-2">Scheduled Job</p>
            </div>
          </div>
        </div>
        <div class="col-lg col-md-4 col-6 ">
          <div class="trip-status-card blue-card">
            <span class="truck-icon"><i class="bi bi-truck"></i></span>
            <div>
              <p class="fs-4 fw-semibold trips-amount">2313</p>
              <p class="fs-12px mt-2">Ongoing Job</p>
            </div>
          </div>
        </div>
        <div class="col-lg col-md-4 col-6 ">
          <div class="trip-status-card green-card">
            <span class="truck-icon"><i class="bi bi-truck"></i></span>
            <div>
              <p class="fs-4 fw-semibold trips-amount">12312312</p>
              <p class="fs-12px mt-2">On Job Vehicles</p>
            </div>
          </div>
        </div>
      </div> -->
  </div>
</div>
<div id="container-list" class="custom-table-container p-0 def-color container-list " (scroll)="onScroll($event)">
  <table [ngClass]="{'h-100':containerList.length==0}">

    <thead>
      <tr>
        <th *ngFor="let header of containerHeaders">
          {{header}}
        </th>
        <th></th>
      </tr>
    </thead>
    <tbody *ngIf="containerList.length == 0">
      <tr class="border-0">
        <td class="bg-white" colspan="30">
          <div class="no-list-data-wrap">
            <figure>
              <img src="assets/img/no-content.png" alt="">
            </figure>
            <h5 class="mt-3 primary-brand-text">No data found!</h5>
          </div>
        </td>
      </tr>

    </tbody>

    <tbody>

      <tr *ngFor="let data of containerList; trackBy: trackById">
        <ng-container *ngFor="let item of data['extras'];let i =index">
          <td class="ws-nowrap"
            *ngIf="!['wo','customer','deposit_job','pullout_job','ll_job'].includes(item?.id)">
            {{item?.value ? item?.value : '-'}} </td>
         
          <td *ngIf="['deposit_job','pullout_job','ll_job'].includes(item?.id)">
            <div class="text-2l">
              <a class="custom-link" *ngIf="item?.value; else elseBlock" target="_blank" [routerLink]="[prefixUrl+'/trip/new-trip/details/',item?.value?.id]">{{item?.value?.name}}</a>
              <ng-template  #elseBlock> -</ng-template >
            </div>
          </td>
          <td *ngIf="item?.id=='wo'">
            <div class="text-2l">
              <a class="custom-link" *ngIf="item?.value; else elseBlock" target="_blank" [routerLink]="[prefixUrl+'/trip/work-order/details/',item?.value?.id]">{{item?.value?.name}}</a>
              <ng-template  #elseBlock> -</ng-template >
            </div>
          </td>
          <td *ngIf="item?.id=='customer'" class="td-2l">
            <div class="text-2l">
              <a class="custom-link " *ngIf="item?.value; else elseBlock" target="_blank"  [routerLink]="[prefixUrl+'/onboarding/party/details/client/',item?.value?.id]">{{item?.value?.name}}</a>
              <ng-template  #elseBlock> -</ng-template >
            </div>
          </td>
        </ng-container>
        <td class="icon-box  tabIndexActive">        
          <div class="d-flex justify-content-center align-items-center" *ngIf="data?.can_schedule">
            <div class="position-relative">
              <div class="m-auto" >
                <i class="material-icons more-icon " 
                  (click)="optionsList('list_'+data.id)">more_vert</i>
                <ul class="more-actions__menu table-popup" [ngClass]="{show: showOptions === 'list_'+data.id}">

                  <ng-container *ngIf="data?.movement_sow==4">
                    <li class="more-actions__item" *ngIf="data?.show_pd?.pullout"
                    (click)="convertToJob(data,1)">
                      Pullout
                    </li>
                    <li class="more-actions__item" *ngIf="data?.show_pd?.deposit"
                    (click)="convertToJob(data,3)">
                      Deposit
                    </li>
                  </ng-container>

                  <ng-container *ngIf="data?.movement_sow==1 && data?.is_pending">
                    <li class="more-actions__item" 
                    (click)="convertToJob(data,1)">
                      Pullout
                    </li>
                  </ng-container>

                  <ng-container *ngIf="data?.movement_sow==3 && data?.is_pending" >
                      <li class="more-actions__item" (click)="convertToJob(data,3)"  >
                      Deposit
                      </li>
                  </ng-container>
                 
                  <ng-container *ngIf="data?.movement_sow==2 && data?.is_pending">
                    <li  class="more-actions__item" (click)="convertToJob(data,2)">Live Loading
                  </ng-container>
                  <ng-container >
                    <li  class="more-actions__item" (click)="convertToJob(data,5)">Local Job
                  </ng-container>
                </ul>
              </div>  
            </div>
          </div>
        
  
        </td>
      </tr>
    </tbody>
  </table>
</div>