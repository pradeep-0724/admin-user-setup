
<app-list-widget listTitle = "Journal Ledger" class="calc-height" [isFilter]="true" [isDateRange]="true"
[isExport]="true" [isDropDown]="false" [isAddButton]="true" [isDateDropDown]="true" (listWidgetData)="listWidgetData($event)"
 [buttonData]="buttonData" [filterUrl]="filterUrl"
 (exportList)="exportList($event)">
</app-list-widget>
<div class="form-layout">
    <div class="table-section">
        <div class="table-wrapper table-wrapper--type4 table--bd " (scroll)="onScroll()" id="journal-entry-table">
            <table class="table-container min-width-200-td">
                <thead>
                    <tr>
                        <th width=15%>Date</th>
                        <th width=15%>Transaction</th>
                        <th width=70% class="p-0">
                            <table class="table-container">
                                <thead>
                                    <tr>
                                        <th width=50%>Account</th>
                                        <th width=25% class=" text-end">Debit ({{ currency_type?.symbol}})</th>
                                        <th width=25% class=" text-end">Credit({{ currency_type?.symbol}})</th>
                                    </tr>
                                </thead>
                            </table>
                        </th>
                    </tr>
                </thead>
                <tbody class="table-body-main">
                    <tr *ngIf="journalEntryData?.length == 0">
                        <td colspan="10" style="background-color: #fff">
                            <div class="no-content-wrapper">
                                <figure class="no-content-pic">
                                    <img src="assets/img/no-content.png" alt="">
                                </figure>
                                <div class="no-content-txt">
                                    <h5 class="heading">No data found!</h5>
                                </div>
                            </div>
                        </td>
                    </tr>
                    <tr
                        *ngFor="let data of journalEntryData ; let journalIndex = index;">
                        <td class="p-0" colspan="3">
                            <table class="table-container">
                                <tbody>
                                    <tr>
                                        <td width=15% rowspan="4" class="align-top">{{ data.date }}</td>
                                        <td width=15% rowspan="4" class="align-top">
                                    <tr *ngIf="data.is_manual_entry"><a class="link"
                                            [routerLink]="[prefixUrl+'/reports/accountant/journal-entry/edit/', data.id]">{{ data.journal_no }}</a>
                                    </tr>
                                    <tr *ngIf="!data.is_manual_entry">{{ data.journal_no }}</tr>
                                    <tr class="journal-ref" *ngIf="data.link_exists"><a class="link" target="_blank" (click)="navigateTo(data,data.url.id)">({{ data.transaction_no }})</a></tr>
                                    <tr class="journal-ref" *ngIf="!data.link_exists">({{ data.transaction_no }})</tr>
                        </td>
                        <td width=70% class="p-0">
                            <table class="table-container">
                                <tbody>
                                    <tr *ngFor="let entry of data.entries;">
                                        <td width=50%> {{ entry?.account_name? entry.account_name:'-' }}</td>
                                        <td width=25% class="rupee-symbol rupee-symbol--sm  text-end">
                                          {{ currency_type?.symbol}} {{ fixedTo3Decimal(entry.debit) }}</td>
                                        <td width=25% class="rupee-symbol rupee-symbol--sm  text-end">
                                          {{ currency_type?.symbol}} {{ fixedTo3Decimal(entry.credit) }}</td>
                                    </tr>
                                    <tr>
                                        <td width=50%>Total</td>
                                        <td width=25% class="rupee-symbol rupee-symbol--sm  text-end">
                                          {{ currency_type?.symbol}} {{ fixedTo3Decimal(data.total_debit) }}</td>
                                        <td width=25% class="rupee-symbol rupee-symbol--sm  text-end">
                                          {{ currency_type?.symbol}} {{ fixedTo3Decimal(data.total_credit) }}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </td>
                    </tr>
                </tbody>
            </table>
            </td>
            </tr>
            </tbody>
            </table>
        </div>
    </div>
